[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "src/adapters/auth/null.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Null Auth adapter\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} [options] Adapter options\n */\nmodule.exports = (core, options) => ({\n\tinit: async () => true,\n\tdestroy: async () => true,\n\tregister: async (req, res) => ({ username: req.body.username }),\n\tlogin: async (req, res) => ({ id: 0, username: req.body.username }),\n\tlogout: async (req, res) => true,\n});\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/adapters/auth/null.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "function",
    "name": "null",
    "memberof": "src/adapters/auth/null.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/auth/null.js~null",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/adapters/auth/null.js",
    "importStyle": "null",
    "description": "Null Auth adapter",
    "lineNumber": 36,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Adapter options"
      }
    ],
    "return": null
  },
  {
    "__docId__": 50,
    "kind": "file",
    "name": "src/adapters/settings/fs.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\n\n/**\n * FS Settings adapter\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} [options] Adapter options\n */\nmodule.exports = (core, options) => {\n\tconst fsOptions = {\n\t\tsystem: false,\n\t\tpath: \"home:/.meeseOS/settings.json\",\n\t\t...(options || {}),\n\t};\n\n\tconst getRealFilename = (req) =>\n\t\tfsOptions.system\n\t\t\t? Promise.resolve(fsOptions.path)\n\t\t\t: core.make(\"meeseOS/vfs\").realpath(fsOptions.path, req.session.user);\n\n\tconst before = (req) =>\n\t\tgetRealFilename(req).then((filename) =>\n\t\t\tfs.ensureDir(path.dirname(filename)).then(() => filename)\n\t\t);\n\n\tconst save = (req) =>\n\t\tbefore(req)\n\t\t\t.then((filename) => fs.writeJson(filename, req.body))\n\t\t\t.then(() => true);\n\n\tconst load = (req) =>\n\t\tbefore(req)\n\t\t\t.then((filename) => fs.readJson(filename))\n\t\t\t.catch((error) => {\n\t\t\t\tcore.logger.warn(error);\n\t\t\t\treturn {};\n\t\t\t});\n\n\treturn { save, load };\n};\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/adapters/settings/fs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 51,
    "kind": "function",
    "name": "fs",
    "memberof": "src/adapters/settings/fs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/settings/fs.js~fs",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/adapters/settings/fs.js",
    "importStyle": "fs",
    "description": "FS Settings adapter",
    "lineNumber": 38,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Adapter options"
      }
    ],
    "return": {
      "types": [
        "{\"save\": *, \"load\": *}"
      ]
    }
  },
  {
    "__docId__": 52,
    "kind": "file",
    "name": "src/adapters/settings/null.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Null Settings adapter\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} [options] Adapter options\n */\nmodule.exports = (core, options) => ({\n\tinit: async () => true,\n\tdestroy: async () => true,\n\tsave: async () => true,\n\tload: async () => ({}),\n});\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/adapters/settings/null.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 53,
    "kind": "function",
    "name": "null",
    "memberof": "src/adapters/settings/null.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/settings/null.js~null",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/adapters/settings/null.js",
    "importStyle": "null",
    "description": "Null Settings adapter",
    "lineNumber": 36,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Adapter options"
      }
    ],
    "return": null
  },
  {
    "__docId__": 54,
    "kind": "file",
    "name": "src/adapters/vfs/system.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\nconst fh = require(\"filehound\");\nconst chokidar = require(\"chokidar\");\nconst extract = require(\"extract-zip\");\nconst yazl = require(\"yazl\");\n\n/**\n * Creates an object readable by the client.\n *\n * @param {Core} core MeeseOS Core instance reference\n * @param {String} realRoot Real root path\n * @param {String} file File path\n * @returns {Object} Information about the file\n */\nconst createFileIter = (core, realRoot, file) => {\n\tconst filename = path.basename(file);\n\tconst realPath = path.join(realRoot, filename);\n\tconst { mime } = core.make(\"meeseOS/vfs\");\n\n\tconst createStat = (stat) => ({\n\t\tisDirectory: stat.isDirectory(),\n\t\tisFile: stat.isFile(),\n\t\tmime: stat.isFile() ? mime(realPath) : null,\n\t\tsize: stat.size,\n\t\tpath: file,\n\t\tfilename,\n\t\tstat,\n\t});\n\n\treturn fs\n\t\t.stat(realPath)\n\t\t.then(createStat)\n\t\t.catch((error) => {\n\t\t\tcore.logger.warn(error);\n\n\t\t\treturn createStat({\n\t\t\t\tisDirectory: () => false,\n\t\t\t\tisFile: () => true,\n\t\t\t\tsize: 0,\n\t\t\t});\n\t\t});\n};\n\n/**\n * Segment value map.\n */\nconst segments = {\n\troot: {\n\t\tdynamic: false,\n\t\tfn: () => process.cwd(),\n\t},\n\n\tvfs: {\n\t\tdynamic: false,\n\t\tfn: (core) => core.config(\"vfs.root\", process.cwd()),\n\t},\n\n\tusername: {\n\t\tdynamic: true,\n\t\tfn: (core, session) => session.user.username,\n\t},\n};\n\n/**\n * Gets a segment value.\n *\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} session\n * @param {String} segment\n * @returns {String}\n */\nconst getSegment = (core, session, seg) =>\n\tsegments[seg] ? segments[seg].fn(core, session) : \"\";\n\n/**\n * Matches a string for segments.\n * @param {String} str\n * @returns {Array}\n */\nconst matchSegments = (str) => str.match(/(\\{\\w+\\})/g) || [];\n\n/**\n * Resolves a string with segments.\n *\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} session\n * @param {String} str\n * @returns {String}\n */\nconst resolveSegments = (core, session, str) =>\n\tmatchSegments(str).reduce(\n\t\t(result, current) =>\n\t\t\tresult.replace(\n\t\t\t\tcurrent,\n\t\t\t\tgetSegment(core, session, current.replace(/(\\{|\\})/g, \"\"))\n\t\t\t),\n\t\tstr\n\t);\n\n/**\n * Resolves a given file path based on a request.\n * Will take out segments from the resulting string\n * and replace them with a list of defined variables.\n *\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} session\n * @param {Object} mount\n * @param {String} file\n * @returns {String}\n */\nconst getRealPath = (core, session, mount, file) => {\n\tconst root = resolveSegments(core, session, mount.attributes.root);\n\tconst str = file.substring(mount.root.length - 1);\n\treturn path.join(root, str);\n};\n\n/**\n * System VFS adapter\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} [options] Adapter options\n */\nmodule.exports = (core) => {\n\tconst wrapper = (method, cb, ...args) =>\n\t\t(vfs) =>\n\t\t\t(file, options = {}) => {\n\t\t\t\tconst promise = Promise.resolve(\n\t\t\t\t\tgetRealPath(core, options.session, vfs.mount, file)\n\t\t\t\t).then((realPath) => fs[method](realPath, ...args));\n\n\t\t\t\treturn typeof cb === \"function\"\n\t\t\t\t\t? cb(promise, options)\n\t\t\t\t\t: promise.then(() => true);\n\t\t\t};\n\n\tconst crossWrapper = (method) =>\n\t\t(srcVfs, destVfs) =>\n\t\t\t(src, dest, options = {}) =>\n\t\t\t\tPromise.resolve({\n\t\t\t\t\trealSource: getRealPath(core, options.session, srcVfs.mount, src),\n\t\t\t\t\trealDest: getRealPath(core, options.session, destVfs.mount, dest),\n\t\t\t\t})\n\t\t\t\t\t.then(({ realSource, realDest }) => fs[method](realSource, realDest))\n\t\t\t\t\t.then(() => true);\n\n\tconst addFileToArchive = (zipfile, realPath) => {\n\t\tconst zipfileLocation = zipfile.outputStream._readableState.pipes[0].path;\n\t\tconst archiveRoot = path.parse(zipfileLocation).dir + path.sep;\n\n\t\tconst readStream = fs.createReadStream(realPath);\n\t\tconst destination = realPath.replace(archiveRoot, \"\");\n\t\tzipfile.addReadStream(readStream, destination);\n\t};\n\n\tconst addDirToArchive = async (zipfile, realPath) => {\n\t\tconst files = await fs.readdir(realPath)\n\t\t\t.then((files) => ({ realPath, files }))\n\t\t\t.then(({ realPath, files }) => {\n\t\t\t\tconst promises = files.map((fileName) => {\n\t\t\t\t\tconst filePath = realPath.replace(/\\/?$/, \"/\") + fileName;\n\t\t\t\t\treturn createFileIter(\n\t\t\t\t\t\tcore,\n\t\t\t\t\t\tpath.dirname(filePath),\n\t\t\t\t\t\tfilePath\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\treturn Promise.all(promises);\n\t\t\t});\n\n\t\tfor (const file of files) {\n\t\t\tif (file.isDirectory) {\n\t\t\t\tawait addToArchive(zipfile, file.path);\n\t\t\t} else {\n\t\t\t\taddFileToArchive(zipfile, file.path);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Adds everything in the given directory to the VFS archive.\n\t * @param {yazl.ZipFile} zipfile The ZIP file to add to\n\t * @param {String} realPath The real path to the file/directory\n\t */\n\tconst addToArchive = async (zipfile, realPath) => {\n\t\tconst isDirectory = await fs.stat(realPath).then((stat) => stat.isDirectory());\n\t\tif (isDirectory) {\n\t\t\tawait addDirToArchive(zipfile, realPath);\n\t\t} else {\n\t\t\tawait addFileToArchive(zipfile, realPath);\n\t\t}\n\t};\n\n\treturn {\n\t\twatch: (mount, callback) => {\n\t\t\tconst dest = resolveSegments(\n\t\t\t\tcore,\n\t\t\t\t{\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tusername: \"**\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmount.attributes.root\n\t\t\t);\n\n\t\t\tconst watch = chokidar.watch(dest, mount.attributes.chokidar || {});\n\t\t\tconst restr = dest.replace(/\\*\\*/g, \"([^/]*)\");\n\t\t\tconst re = new RegExp(restr + \"/(.*)\");\n\t\t\tconst seg = matchSegments(mount.attributes.root)\n\t\t\t\t.map((s) => s.replace(/\\{|\\}/g, \"\"))\n\t\t\t\t.filter((s) => segments[s].dynamic);\n\n\t\t\tconst handle = (name) => (file) => {\n\t\t\t\tconst test = re.exec(file);\n\n\t\t\t\tif (test && test.length > 0) {\n\t\t\t\t\tconst args = seg.reduce((res, k, i) => ({ [k]: test[i + 1] }), {});\n\t\t\t\t\tcallback(args, test[test.length - 1], name);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst events = [\"add\", \"addDir\", \"unlinkDir\", \"unlink\"];\n\t\t\tevents.forEach((name) => watch.on(name, handle(name)));\n\n\t\t\treturn watch;\n\t\t},\n\n\t\t/**\n\t\t * Get filesystem capabilities.\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @return {Object[]}\n\t\t */\n\t\tcapabilities: (vfs) =>\n\t\t\t(file, options = {}) =>\n\t\t\t\tPromise.resolve({\n\t\t\t\t\tsort: false,\n\t\t\t\t\tpagination: false\n\t\t\t\t}),\n\n\t\t/**\n\t\t * Gets the real filesystem path (internal only)\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {String}\n\t\t */\n\t\trealpath: (vfs) =>\n\t\t\t(file, options = {}) =>\n\t\t\t\tPromise.resolve(getRealPath(core, options.session, vfs.mount, file)),\n\n\t\t/**\n\t\t * Checks if file exists.\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Promise<Boolean, Error>}\n\t\t */\n\t\texists: wrapper(\n\t\t\t\"access\",\n\t\t\t(promise) => {\n\t\t\t\treturn promise.then(() => true).catch(() => false);\n\t\t\t},\n\t\t\tfs.F_OK\n\t\t),\n\n\t\t/**\n\t\t * Get file statistics.\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Object}\n\t\t */\n\t\tstat: (vfs) =>\n\t\t\t(file, options = {}) =>\n\t\t\t\tPromise.resolve(\n\t\t\t\t\tgetRealPath(core, options.session, vfs.mount, file)\n\t\t\t\t).then((realPath) => {\n\t\t\t\t\treturn fs\n\t\t\t\t\t\t.access(realPath, fs.F_OK)\n\t\t\t\t\t\t.then(() => createFileIter(core, path.dirname(realPath), realPath));\n\t\t\t\t}),\n\n\t\t/**\n\t\t * Reads directory.\n\t\t * @param {String} root The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Object[]}\n\t\t */\n\t\treaddir: (vfs) =>\n\t\t\t(root, options) =>\n\t\t\t\tPromise.resolve(getRealPath(core, options.session, vfs.mount, root))\n\t\t\t\t\t.then((realPath) =>\n\t\t\t\t\t\tfs.readdir(realPath).then((files) => ({ realPath, files }))\n\t\t\t\t\t)\n\t\t\t\t\t.then(({ realPath, files }) => {\n\t\t\t\t\t\tconst promises = files.map((file) =>\n\t\t\t\t\t\t\tcreateFileIter(core, realPath, root.replace(/\\/?$/, \"/\") + file)\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn Promise.all(promises);\n\t\t\t\t\t}),\n\n\t\t/**\n\t\t * Reads file stream.\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Stream.Readable}\n\t\t */\n\t\treadfile: (vfs) =>\n\t\t\t(file, options = {}) =>\n\t\t\t\tPromise.resolve(getRealPath(core, options.session, vfs.mount, file))\n\t\t\t\t\t.then((realPath) =>\n\t\t\t\t\t\tfs.stat(realPath).then((stat) => ({ realPath, stat }))\n\t\t\t\t\t)\n\t\t\t\t\t.then(({ realPath, stat }) => {\n\t\t\t\t\t\tif (!stat.isFile()) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst range = options.range || [];\n\t\t\t\t\t\treturn fs.createReadStream(realPath, {\n\t\t\t\t\t\t\tflags: \"r\",\n\t\t\t\t\t\t\tstart: range[0],\n\t\t\t\t\t\t\tend: range[1],\n\t\t\t\t\t\t});\n\t\t\t\t\t}),\n\n\t\t/**\n\t\t * Creates directory.\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Boolean}\n\t\t */\n\t\tmkdir: wrapper(\"mkdir\", (promise, options = {}) => {\n\t\t\treturn promise\n\t\t\t\t.then(() => true)\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tif (options.ensure && e.code === \"EEXIST\") {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.reject(e);\n\t\t\t\t});\n\t\t}),\n\n\t\t/**\n\t\t * Writes file stream.\n\t\t *\n\t\t * @param {String} file The file path from client\n\t\t * @param {Stream.Readable} data The stream\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Promise<Boolean, Error>}\n\t\t */\n\t\twritefile: (vfs) =>\n\t\t\t(file, data, options = {}) =>\n\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t// FIXME: Currently this actually copies the file because\n\t\t\t\t\t// formidable will put this in a temporary directory.\n\t\t\t\t\t// It would probably be better to do a \"rename()\" on local filesystems\n\t\t\t\t\tconst realPath = getRealPath(core, options.session, vfs.mount, file);\n\n\t\t\t\t\tconst write = () => {\n\t\t\t\t\t\tconst stream = fs.createWriteStream(realPath);\n\t\t\t\t\t\tdata.on(\"error\", (err) => reject(err));\n\t\t\t\t\t\tdata.on(\"end\", () => resolve(true));\n\t\t\t\t\t\tdata.pipe(stream);\n\t\t\t\t\t};\n\n\t\t\t\t\tfs.stat(realPath)\n\t\t\t\t\t\t.then((stat) => {\n\t\t\t\t\t\t\tif (stat.isDirectory()) {\n\t\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twrite();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// We are not worried about the file not existing, so if that is\n\t\t\t\t\t\t// the error message, we can just go ahead and write to create it.\n\t\t\t\t\t\t.catch((err) => (err.code === \"ENOENT\" ? write() : reject(err)));\n\t\t\t\t}),\n\n\t\t/**\n\t\t * Renames given file or directory.\n\t\t *\n\t\t * @param {String} src The source file path from client\n\t\t * @param {String} dest The destination file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Boolean}\n\t\t */\n\t\trename: crossWrapper(\"rename\"),\n\n\t\t/**\n\t\t * Copies given file or directory.\n\t\t *\n\t\t * @param {String} src The source file path from client\n\t\t * @param {String} dest The destination file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Boolean}\n\t\t */\n\t\tcopy: crossWrapper(\"copy\"),\n\n\t\t/**\n\t\t * Removes given file or directory\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Boolean}\n\t\t */\n\t\tunlink: wrapper(\"remove\"),\n\n\t\t/**\n\t\t * Searches for files and folders.\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Boolean}\n\t\t */\n\t\tsearch: (vfs) =>\n\t\t\t(root, pattern, options = {}) =>\n\t\t\t\tPromise.resolve(getRealPath(core, options.session, vfs.mount, root))\n\t\t\t\t\t.then((realPath) => {\n\t\t\t\t\t\treturn fh\n\t\t\t\t\t\t\t.create()\n\t\t\t\t\t\t\t.paths(realPath)\n\t\t\t\t\t\t\t.match(pattern)\n\t\t\t\t\t\t\t.find()\n\t\t\t\t\t\t\t.then((files) => ({ realPath, files }))\n\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\tcore.logger.warn(err);\n\n\t\t\t\t\t\t\t\treturn { realPath, files: [] };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.then(({ realPath, files }) => {\n\t\t\t\t\t\tconst promises = files.map((file) => {\n\t\t\t\t\t\t\tconst rf = file.substr(realPath.length);\n\t\t\t\t\t\t\treturn createFileIter(\n\t\t\t\t\t\t\t\tcore,\n\t\t\t\t\t\t\t\tpath.dirname(realPath.replace(/\\/?$/, \"/\") + rf),\n\t\t\t\t\t\t\t\troot.replace(/\\/?$/, \"/\") + rf\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn Promise.all(promises);\n\t\t\t\t\t}),\n\n\t\t/**\n\t\t * Touches a file.\n\t\t * @param {String} file The file path from client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Boolean}\n\t\t */\n\t\ttouch: wrapper(\"ensureFile\"),\n\n\t\t/**\n\t\t * Compresses or decompresses a given selection.\n\t\t * @param {Array} selection The selection from the client\n\t\t * @param {Object} [options={}] Options\n\t\t * @returns {Promise<Boolean, Error>}\n\t\t */\n\t\tarchive: (vfs) =>\n\t\t\tasync (selection, options = {}) => {\n\t\t\t\tconst realPaths = selection.map(\n\t\t\t\t\t(file) => getRealPath(core, options.session, vfs.mount, file)\n\t\t\t\t);\n\n\t\t\t\tconst action = options.action || \"compress\";\n\t\t\t\tswitch (action) {\n\t\t\t\t\tcase \"compress\": {\n\t\t\t\t\t\t// Define the archive instance\n\t\t\t\t\t\tconst zipfile = new yazl.ZipFile();\n\n\t\t\t\t\t\t// Create a stream for the archive output\n\t\t\t\t\t\t// IDEA: Dialog for the archive name on the client side?\n\t\t\t\t\t\tconst output = fs.createWriteStream(realPaths[0] + \".zip\");\n\t\t\t\t\t\tzipfile.outputStream.pipe(output);\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Add the files to the archive\n\t\t\t\t\t\t\tfor (const realPath of realPaths) {\n\t\t\t\t\t\t\t\tawait addToArchive(zipfile, realPath);\n\n\t\t\t\t\t\t\t\t// Delete the original file\n\t\t\t\t\t\t\t\t// fs.unlink(realPath);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tzipfile.end();\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t// If there is an error, end the archive and delete the file\n\t\t\t\t\t\t\tzipfile.end();\n\t\t\t\t\t\t\tfs.unlink(realPaths[0] + \".zip\");\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"extract\":\n\t\t\t\t\t\tfor (const realPath of realPaths) {\n\t\t\t\t\t\t\t// Remove the `.zip` extension from the path\n\t\t\t\t\t\t\t// IDEA: Dialog for the target name on the client side?\n\t\t\t\t\t\t\tconst target = realPath.split(\".\").slice(0, -1).join(\".\");\n\n\t\t\t\t\t\t\t// Extract the archive\n\t\t\t\t\t\t\tawait extract(realPath, { dir: target });\n\n\t\t\t\t\t\t\t// Delete the archive file\n\t\t\t\t\t\t\t// fs.unlink(realPath);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn Promise.reject(\n\t\t\t\t\t\t\tnew Error(`Unknown archive action: '${action}'`)\n\t\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve(true);\n\t\t\t}\n\t};\n};\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/adapters/vfs/system.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 55,
    "kind": "function",
    "name": "createFileIter",
    "memberof": "src/adapters/vfs/system.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/vfs/system.js~createFileIter",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/adapters/vfs/system.js",
    "importStyle": null,
    "description": "Creates an object readable by the client.",
    "lineNumber": 46,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} Information about the file"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "realRoot",
        "description": "Real root path"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "File path"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Information about the file"
    },
    "ignore": true
  },
  {
    "__docId__": 56,
    "kind": "variable",
    "name": "segments",
    "memberof": "src/adapters/vfs/system.js",
    "static": true,
    "longname": "src/adapters/vfs/system.js~segments",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/adapters/vfs/system.js",
    "importStyle": null,
    "description": "Segment value map.",
    "lineNumber": 78,
    "type": {
      "types": [
        "{\"root\": *, \"vfs\": *, \"username\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 57,
    "kind": "function",
    "name": "getSegment",
    "memberof": "src/adapters/vfs/system.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/vfs/system.js~getSegment",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/adapters/vfs/system.js",
    "importStyle": null,
    "description": "Gets a segment value.",
    "lineNumber": 103,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "session",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "segment",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 58,
    "kind": "function",
    "name": "matchSegments",
    "memberof": "src/adapters/vfs/system.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/vfs/system.js~matchSegments",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/adapters/vfs/system.js",
    "importStyle": null,
    "description": "Matches a string for segments.",
    "lineNumber": 111,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 59,
    "kind": "function",
    "name": "resolveSegments",
    "memberof": "src/adapters/vfs/system.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/vfs/system.js~resolveSegments",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/adapters/vfs/system.js",
    "importStyle": null,
    "description": "Resolves a string with segments.",
    "lineNumber": 121,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "session",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 60,
    "kind": "function",
    "name": "getRealPath",
    "memberof": "src/adapters/vfs/system.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/vfs/system.js~getRealPath",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/adapters/vfs/system.js",
    "importStyle": null,
    "description": "Resolves a given file path based on a request.\nWill take out segments from the resulting string\nand replace them with a list of defined variables.",
    "lineNumber": 142,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "session",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "mount",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 61,
    "kind": "function",
    "name": "system",
    "memberof": "src/adapters/vfs/system.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/vfs/system.js~system",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/adapters/vfs/system.js",
    "importStyle": "system",
    "description": "System VFS adapter",
    "lineNumber": 153,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Adapter options"
      }
    ],
    "return": {
      "types": [
        "{\"watch\": *, \"capabilities\": *, \"realpath\": *, \"exists\": *, \"stat\": *, \"readdir\": *, \"readfile\": *, \"mkdir\": *, \"writefile\": *, \"rename\": *, \"copy\": *, \"unlink\": *, \"search\": *, \"touch\": *, \"archive\": *}"
      ]
    }
  },
  {
    "__docId__": 62,
    "kind": "file",
    "name": "src/auth.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst consola = require(\"consola\");\nconst pathLib = require(\"path\");\nconst logger = consola.withTag(\"Auth\");\nconst nullAdapter = require(\"./adapters/auth/null\");\nconst TokenStorage = require(\"./utils/token-storage\");\nconst TokenFactory = require(\"./utils/token-factory\");\n\n/**\n * TODO: typedef\n * @typedef {Object} AuthAdapter\n */\n\n/**\n * Authentication User Profile\n * @typedef {Object} AuthUserProfile\n * @property {String} username\n * @property {String} name\n * @property {String[]} groups\n */\n\n/**\n * Authentication Service Options\n * @typedef {Object} AuthOptions\n * @property {AuthAdapter} [adapter]\n * @property {String[]} [requiredGroups]\n * @property {String[]} [denyUsers]\n */\n\n/**\n * Authentication Handler\n */\nclass Auth {\n\t/**\n\t * Creates a new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {AuthOptions} [options={}] Service Provider arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tconst { requiredGroups, denyUsers } = core.configuration.auth;\n\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {AuthOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\tadapter: nullAdapter,\n\t\t\trequiredGroups,\n\t\t\tdenyUsers,\n\t\t\t...options,\n\t\t};\n\n\t\t/**\n\t\t * @type {AuthAdapter}\n\t\t */\n\t\tthis.adapter = nullAdapter(core, this.options.config);\n\n\t\ttry {\n\t\t\tthis.adapter = this.options.adapter(core, this.options.config);\n\t\t} catch (e) {\n\t\t\tlogger.warn(e);\n\t\t}\n\t}\n\n\t/**\n\t * Initializes adapter.\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync init() {\n\t\t/**\n\t\t * @type {TokenFactory}\n\t\t */\n\t\tthis.tokenFactory = this.core.make(\"meeseOS/token-factory\");\n\n\t\tawait this.tokenFactory.init();\n\n\t\t/**\n\t\t * @type {TokenStorage}\n\t\t */\n\t\tthis.storage = this.core.make(\"meeseOS/token-storage\");\n\n\t\tawait this.storage.init();\n\n\t\tif (this.adapter.init) {\n\t\t\treturn this.adapter.init();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Destroys instance.\n\t */\n\tdestroy() {\n\t\tif (this.adapter.destroy) {\n\t\t\tthis.adapter.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * Performs a login request.\n\t * @param {Request} req HTTP request\n\t * @param {Response} res HTTP response\n\t * @returns {Promise<undefined>}\n\t */\n\tasync login(req, res) {\n\t\tlet result = {};\n\t\tconst refreshToken = req.body.refreshToken;\n\n\t\tif (refreshToken) {\n\t\t\t// Decodes the JWT refresh token and returns the user information\n\t\t\tconst refreshTokenUser =\n\t\t\t  await this.tokenFactory.refreshToAccessToken(refreshToken);\n\n\t\t\tif (refreshTokenUser && refreshTokenUser.accessToken) {\n\t\t\t\tresult.username = refreshTokenUser.username;\n\t\t\t\tresult.groups = refreshTokenUser.groups;\n\t\t\t\tresult.accessToken = refreshTokenUser.accessToken;\n\t\t\t}\n\t\t} else {\n\t\t\t// Attempts to log the user in using the adapter\n\t\t\tconst standardAuthResult = await this.adapter.login(req, res);\n\n\t\t\tif (standardAuthResult) {\n\t\t\t\tresult = standardAuthResult;\n\t\t\t\tresult.refreshToken = this.tokenFactory.createRefreshToken(\n\t\t\t\t\tstandardAuthResult.username,\n\t\t\t\t\tstandardAuthResult.groups\n\t\t\t\t);\n\t\t\t\tresult.accessToken = this.tokenFactory.createAccessToken(\n\t\t\t\t\tstandardAuthResult.username,\n\t\t\t\t\tstandardAuthResult.groups\n\t\t\t\t);\n\n\t\t\t\tthis.storage.create(result.refreshToken);\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(result).length !== 0) {\n\t\t\tconst profile = this.createUserProfile(req.body, result);\n\t\t\tif (profile && this.checkLoginPermissions(profile)) {\n\t\t\t\tawait this.createHomeDirectory(profile);\n\t\t\t\treq.session.user = profile;\n\t\t\t\treq.session.save(() => {\n\t\t\t\t\tthis.core.emit(\n\t\t\t\t\t\t\"meeseOS/core:logged-in\",\n\t\t\t\t\t\tObject.freeze({ ...req.session, })\n\t\t\t\t\t);\n\n\t\t\t\t\tres.status(200).json(profile);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tres.status(403).json({ error: \"Invalid login or permission denied\" });\n\t}\n\n\t/**\n\t * Performs a logout request.\n\t * @param {Request} req HTTP request\n\t * @param {Response} res HTTP response\n\t * @returns {Promise<undefined>}\n\t */\n\tasync logout(req, res) {\n\t\tthis.core.emit(\n\t\t\t\"meeseOS/core:logging-out\",\n\t\t\tObject.freeze({ ...req.session, })\n\t\t);\n\n\t\tawait this.adapter.logout(req, res);\n\n\t\ttry {\n\t\t\treq.session.destroy();\n\t\t} catch (e) {\n\t\t\tlogger.warn(e);\n\t\t}\n\n\t\tres.json({});\n\t}\n\n\t/**\n\t * Performs a register request.\n\t * @param {Request} req HTTP request\n\t * @param {Response} res HTTP response\n\t * @returns {Promise<undefined>}\n\t */\n\tasync register(req, res) {\n\t\tif (this.adapter.register) {\n\t\t\tconst result = await this.adapter.register(req, res);\n\n\t\t\treturn res.json(result);\n\t\t}\n\n\t\treturn res.status(403).json({ error: \"Registration unavailable\" });\n\t}\n\n\t/**\n\t * Checks if login is allowed for this user.\n\t * @param {AuthUserProfile} profile User profile\n\t * @returns {Boolean}\n\t */\n\tcheckLoginPermissions(profile) {\n\t\tconst { requiredGroups, denyUsers } = this.options;\n\n\t\tif (denyUsers.indexOf(profile.username) !== -1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (requiredGroups.length > 0) {\n\t\t\tconst passes = requiredGroups.every((name) =>\n\t\t\t\tprofile.groups.indexOf(name) !== -1\n\t\t\t);\n\n\t\t\treturn passes;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Creates user profile object.\n\t * @param {Object} fields Input fields\n\t * @param {Object} result Login result\n\t * @returns {AuthUserProfile|Boolean}\n\t */\n\tcreateUserProfile(fields, result) {\n\t\tconst ignores = [\"password\"];\n\t\tconst required = [\"username\"];\n\t\tconst template = {\n\t\t\tusername: fields.username,\n\t\t\tid: fields.username,\n\t\t\tname: fields.username,\n\t\t\tgroups: this.core.config(\"auth.defaultGroups\", []),\n\t\t\trefreshToken: fields.refreshToken,\n\t\t};\n\n\t\tconst mergedArrays = { ...fields, ...result };\n\t\tconst missing = required.filter((k) => typeof mergedArrays[k] === \"undefined\");\n\t\tif (missing.length) {\n\t\t\tlogger.warn(\"Missing user attributes:\", missing);\n\t\t\treturn false;\n\t\t}\n\n\t\tconst values = Object.keys(mergedArrays)\n\t\t\t.filter((key) => ignores.indexOf(key) === -1)\n\t\t\t.reduce((obj, key) => ({ ...obj, [key]: mergedArrays[key] }), {});\n\n\t\treturn { ...template, ...values };\n\t}\n\n\t/**\n\t * Tries to create home directory for a user.\n\t * @param {AuthUserProfile} profile User profile\n\t * @returns {Promise<undefined>}\n\t */\n\tasync createHomeDirectory(profile) {\n\t\tconst vfs = this.core.make(\"meeseOS/vfs\");\n\t\tconst template = this.core.config(\"vfs.home.template\", []);\n\n\t\tif (typeof template === \"string\") {\n\t\t\t// If the template is a string, it is a path to a directory\n\t\t\t// that should be copied to the user's home directory\n\t\t\tconst root = await vfs.realpath(\"home:/\", profile);\n\n\t\t\tawait fs.copy(template, root, { overwrite: false });\n\t\t} else if (Array.isArray(template)) {\n\t\t\tawait this.createHomeDirectoryFromArray(template, vfs, profile);\n\t\t}\n\t}\n\n\t/**\n\t * If the template is an array, it is a list of files that should be copied\n\t * to the user's home directory.\n\t * @param {Object[]} template Array of objects with a specified path,\n\t * optionally with specified content but defaulting to an empty string\n\t * @param {VFSServiceProvider} vfs An instance of the virtual file system\n\t * @param {AuthUserProfile} profile User profile\n\t */\n\tasync createHomeDirectoryFromArray(template, vfs, profile) {\n\t\tfor (const file of template) {\n\t\t\ttry {\n\t\t\t\tconst { path, contents = \"\" } = file;\n\t\t\t\tconst shortcutsFile = await vfs.realpath(`home:/${path}`, profile);\n\t\t\t\tconst dir = pathLib.dirname(shortcutsFile);\n\t\t\t\tif (!await fs.pathExists(shortcutsFile)) {\n\t\t\t\t\tawait fs.ensureDir(dir);\n\t\t\t\t\tawait fs.writeFile(shortcutsFile, contents);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tlogger.warn(`There was a problem writing '${file.path}' to the home directory template`);\n\t\t\t\tlogger.error(\"ERROR:\", e);\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = Auth;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/auth.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 63,
    "kind": "variable",
    "name": "logger",
    "memberof": "src/auth.js",
    "static": true,
    "longname": "src/auth.js~logger",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/auth.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 64,
    "kind": "typedef",
    "name": "AuthAdapter",
    "memberof": "src/auth.js",
    "static": true,
    "longname": "src/auth.js~AuthAdapter",
    "access": "public",
    "description": "TODO: typedef",
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "AuthAdapter"
    }
  },
  {
    "__docId__": 65,
    "kind": "typedef",
    "name": "AuthUserProfile",
    "memberof": "src/auth.js",
    "static": true,
    "longname": "src/auth.js~AuthUserProfile",
    "access": "public",
    "description": "Authentication User Profile",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "username",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String[]"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "AuthUserProfile"
    }
  },
  {
    "__docId__": 66,
    "kind": "typedef",
    "name": "AuthOptions",
    "memberof": "src/auth.js",
    "static": true,
    "longname": "src/auth.js~AuthOptions",
    "access": "public",
    "description": "Authentication Service Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "AuthAdapter"
        ],
        "spread": false,
        "optional": true,
        "name": "adapter",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String[]"
        ],
        "spread": false,
        "optional": true,
        "name": "requiredGroups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String[]"
        ],
        "spread": false,
        "optional": true,
        "name": "denyUsers",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "AuthOptions"
    }
  },
  {
    "__docId__": 67,
    "kind": "class",
    "name": "Auth",
    "memberof": "src/auth.js",
    "static": true,
    "longname": "src/auth.js~Auth",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/auth.js",
    "importStyle": "Auth",
    "description": "Authentication Handler",
    "lineNumber": 63,
    "interface": false
  },
  {
    "__docId__": 68,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/auth.js~Auth#constructor",
    "access": "public",
    "description": "Creates a new instance.",
    "lineNumber": 69,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "AuthOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Service Provider arguments"
      }
    ]
  },
  {
    "__docId__": 69,
    "kind": "member",
    "name": "core",
    "memberof": "src/auth.js~Auth",
    "static": false,
    "longname": "src/auth.js~Auth#core",
    "access": "public",
    "description": "",
    "lineNumber": 75,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 70,
    "kind": "member",
    "name": "options",
    "memberof": "src/auth.js~Auth",
    "static": false,
    "longname": "src/auth.js~Auth#options",
    "access": "public",
    "description": "",
    "lineNumber": 80,
    "type": {
      "nullable": null,
      "types": [
        "AuthOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 71,
    "kind": "member",
    "name": "adapter",
    "memberof": "src/auth.js~Auth",
    "static": false,
    "longname": "src/auth.js~Auth#adapter",
    "access": "public",
    "description": "",
    "lineNumber": 90,
    "type": {
      "nullable": null,
      "types": [
        "AuthAdapter"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 73,
    "kind": "method",
    "name": "init",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/auth.js~Auth#init",
    "access": "public",
    "description": "Initializes adapter.",
    "lineNumber": 103,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 74,
    "kind": "member",
    "name": "tokenFactory",
    "memberof": "src/auth.js~Auth",
    "static": false,
    "longname": "src/auth.js~Auth#tokenFactory",
    "access": "public",
    "description": "",
    "lineNumber": 107,
    "type": {
      "nullable": null,
      "types": [
        "TokenFactory"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 75,
    "kind": "member",
    "name": "storage",
    "memberof": "src/auth.js~Auth",
    "static": false,
    "longname": "src/auth.js~Auth#storage",
    "access": "public",
    "description": "",
    "lineNumber": 114,
    "type": {
      "nullable": null,
      "types": [
        "TokenStorage"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 76,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/auth.js~Auth#destroy",
    "access": "public",
    "description": "Destroys instance.",
    "lineNumber": 128,
    "params": [],
    "return": null
  },
  {
    "__docId__": 77,
    "kind": "method",
    "name": "login",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/auth.js~Auth#login",
    "access": "public",
    "description": "Performs a login request.",
    "lineNumber": 140,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "HTTP request"
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "HTTP response"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 78,
    "kind": "method",
    "name": "logout",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/auth.js~Auth#logout",
    "access": "public",
    "description": "Performs a logout request.",
    "lineNumber": 200,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "HTTP request"
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "HTTP response"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 79,
    "kind": "method",
    "name": "register",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/auth.js~Auth#register",
    "access": "public",
    "description": "Performs a register request.",
    "lineNumber": 223,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "HTTP request"
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "HTTP response"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 80,
    "kind": "method",
    "name": "checkLoginPermissions",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/auth.js~Auth#checkLoginPermissions",
    "access": "public",
    "description": "Checks if login is allowed for this user.",
    "lineNumber": 238,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "AuthUserProfile"
        ],
        "spread": false,
        "optional": false,
        "name": "profile",
        "description": "User profile"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 81,
    "kind": "method",
    "name": "createUserProfile",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/auth.js~Auth#createUserProfile",
    "access": "public",
    "description": "Creates user profile object.",
    "lineNumber": 262,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{AuthUserProfile|Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "fields",
        "description": "Input fields"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "result",
        "description": "Login result"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "AuthUserProfile",
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 82,
    "kind": "method",
    "name": "createHomeDirectory",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/auth.js~Auth#createHomeDirectory",
    "access": "public",
    "description": "Tries to create home directory for a user.",
    "lineNumber": 292,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "AuthUserProfile"
        ],
        "spread": false,
        "optional": false,
        "name": "profile",
        "description": "User profile"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 83,
    "kind": "method",
    "name": "createHomeDirectoryFromArray",
    "memberof": "src/auth.js~Auth",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/auth.js~Auth#createHomeDirectoryFromArray",
    "access": "public",
    "description": "If the template is an array, it is a list of files that should be copied\nto the user's home directory.",
    "lineNumber": 315,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object[]"
        ],
        "spread": false,
        "optional": false,
        "name": "template",
        "description": "Array of objects with a specified path,\noptionally with specified content but defaulting to an empty string"
      },
      {
        "nullable": null,
        "types": [
          "VFSServiceProvider"
        ],
        "spread": false,
        "optional": false,
        "name": "vfs",
        "description": "An instance of the virtual file system"
      },
      {
        "nullable": null,
        "types": [
          "AuthUserProfile"
        ],
        "spread": false,
        "optional": false,
        "name": "profile",
        "description": "User profile"
      }
    ],
    "return": null
  },
  {
    "__docId__": 84,
    "kind": "file",
    "name": "src/config.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst path = require(\"path\");\nconst maxAge = 60 * 60 * 12;\nconst mb = (m) => m * 1024 * 1024;\n\nconst defaultConfiguration = {\n\tdevelopment: !(process.env.NODE_ENV || \"\").match(/^prod/i),\n\tlogging: true,\n\tindex: \"index.html\",\n\t// NOTE: You will likely need to override `localhost` on Windows machines\n\tbind: \"0.0.0.0\",\n\tport: 8000,\n\tpublic: null,\n\tmorgan: \"tiny\",\n\texpress: {\n\t\tmaxFieldsSize: mb(20),\n\t\tmaxFileSize: mb(200),\n\t\tmaxBodySize: \"100kb\",\n\t},\n\thttps: {\n\t\tenabled: false,\n\t\toptions: {\n\t\t\tkey: null,\n\t\t\tcert: null,\n\t\t},\n\t},\n\tws: {\n\t\tport: null,\n\t\tping: 30 * 1000,\n\t},\n\tproxy: [\n\t\t/*\n\t\t{\n\t\t\tsource: 'pattern',\n\t\t\tdestination: 'pattern',\n\t\t\toptions: {}\n\t\t}\n\t\t*/\n\t],\n\tauth: {\n\t\tvfsGroups: [],\n\t\tdefaultGroups: [],\n\t\trequiredGroups: [],\n\t\trequireAllGroups: false,\n\t\tdenyUsers: [],\n\t},\n\tmime: {\n\t\tfilenames: {\n\t\t\t// 'filename': 'mime/type'\n\t\t\tMakefile: \"text/x-makefile\",\n\t\t\t\".gitignore\": \"text/plain\",\n\t\t},\n\t\tdefine: {\n\t\t\t// 'mime/type': ['ext']\n\t\t\t\"text/x-lilypond\": [\"ly\", \"ily\"],\n\t\t\t\"text/x-python\": [\"py\"],\n\t\t\t\"application/tar+gzip\": [\"tgz\"],\n\t\t},\n\t},\n\tsession: {\n\t\tstore: {\n\t\t\tmodule: require.resolve(\"connect-loki\"),\n\t\t\tdatabaseName: \"meeseOS.db\",\n\t\t\tcollectionName: \"tokens\",\n\t\t\tdatabaseOptions: {\n\t\t\t\tautosave: true,\n\t\t\t\tautoload: true,\n\t\t\t},\n\t\t},\n\t\tjwt: {\n\t\t\taccessTokenSecret: \"meeseOS\",\n\t\t\trefreshTokenSecret: \"meeseOSrefresh\",\n\t\t\taccessTokenDuration: \"10m\",\n\t\t},\n\t\toptions: {\n\t\t\tname: \"meeseOS.sid\",\n\t\t\tsecret: \"meeseOSSession\",\n\t\t\trolling: true,\n\t\t\tresave: false,\n\t\t\tsaveUninitialized: false,\n\t\t\tcookie: {\n\t\t\t\tsecure: \"auto\",\n\t\t\t\tmaxAge: 1000 * maxAge,\n\t\t\t},\n\t\t},\n\t},\n\tpackages: {\n\t\t// Resolves to root by default\n\t\tdiscovery: \"packages.json\",\n\n\t\t// Resolves to dist/ by default\n\t\tmetadata: \"metadata.json\",\n\t},\n\n\tvfs: {\n\t\twatch: false,\n\t\troot: path.join(process.cwd(), \"vfs\"),\n\n\t\tmountpoints: [\n\t\t\t{\n\t\t\t\tname: \"meeseOS\",\n\t\t\t\tattributes: {\n\t\t\t\t\troot: \"{root}/dist\",\n\t\t\t\t\treadOnly: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"home\",\n\t\t\t\tattributes: {\n\t\t\t\t\troot: \"{vfs}/{username}\",\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\n\t\thome: {\n\t\t\ttemplate: [\n\t\t\t\t{\n\t\t\t\t\tpath: \".desktop/.shortcuts.json\",\n\t\t\t\t\tcontents: JSON.stringify([]),\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t},\n};\n\nmodule.exports = {\n\tdefaultConfiguration,\n};\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/config.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 85,
    "kind": "variable",
    "name": "maxAge",
    "memberof": "src/config.js",
    "static": true,
    "longname": "src/config.js~maxAge",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/config.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 86,
    "kind": "function",
    "name": "mb",
    "memberof": "src/config.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/config.js~mb",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/config.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "params": [
      {
        "name": "m",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 87,
    "kind": "variable",
    "name": "defaultConfiguration",
    "memberof": "src/config.js",
    "static": true,
    "longname": "src/config.js~defaultConfiguration",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/config.js",
    "importStyle": "{defaultConfiguration}",
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "{\"development\": *, \"logging\": boolean, \"index\": string, \"bind\": string, \"port\": number, \"public\": *, \"morgan\": string, \"express\": *, \"https\": *, \"ws\": *, \"proxy\": *, \"auth\": *, \"mime\": *, \"session\": *, \"packages\": *, \"vfs\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 88,
    "kind": "file",
    "name": "src/core.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst http = require(\"http\");\nconst https = require(\"https\");\nconst path = require(\"path\");\nconst morgan = require(\"morgan\");\nconst express = require(\"express\");\nconst minimist = require(\"minimist\");\nconst deepmerge = require(\"deepmerge\");\nconst consola = require(\"consola\");\nconst { CoreBase } = require(\"@meeseOS/common\");\nconst {\n\targvToConfig,\n\tcreateSession,\n\tcreateWebsocket,\n\tparseJson,\n} = require(\"./utils/core.js\");\nconst { defaultConfiguration } = require(\"./config.js\");\nconst logger = consola.withTag(\"Core\");\n\nlet _instance;\n\n/**\n * MeeseOS Server Core\n */\nclass Core extends CoreBase {\n\t/**\n\t * Creates a new instance\n\t * @param {Object} cfg Configuration tree\n\t * @param {Object} [options] Options\n\t */\n\tconstructor(cfg, options = {}) {\n\t\toptions = {\n\t\t\targv: process.argv.splice(2),\n\t\t\troot: process.cwd(),\n\t\t\t...options,\n\t\t};\n\n\t\tconst argv = minimist(options.argv);\n\t\tconst val = (k) => argvToConfig[k](parseJson(argv[k]));\n\t\tconst keys = Object.keys(argvToConfig).filter((k) =>\n\t\t\tObject.prototype.hasOwnProperty.call(argv, k)\n\t\t);\n\t\tconst argvConfig = keys.reduce((o, k) => {\n\t\t\tlogger.info(`CLI argument '--${k}' overrides`, val(k));\n\t\t\treturn { ...o, ...deepmerge(o, val(k)) };\n\t\t}, {});\n\n\t\tsuper(defaultConfiguration, deepmerge(cfg, argvConfig), options);\n\n\t\tthis.logger = consola.withTag(\"Internal\");\n\n\t\t/**\n\t\t * @type {Express}\n\t\t */\n\t\tthis.app = express();\n\n\t\tif (!this.configuration.public) {\n\t\t\tthrow new Error(\"The public option is required\");\n\t\t}\n\n\t\t/**\n\t\t * @type {http.Server|https.Server}\n\t\t */\n\t\tthis.httpServer = this.config(\"https.enabled\")\n\t\t\t? https.createServer(this.config(\"https.options\"), this.app)\n\t\t\t: http.createServer(this.app);\n\n\t\t/**\n\t\t * @type {Object}\n\t\t */\n\t\tthis.session = createSession(this.configuration);\n\n\t\t/**\n\t\t * @type {Object}\n\t\t */\n\t\tthis.ws = createWebsocket(\n\t\t\tthis.app,\n\t\t\tthis.configuration,\n\t\t\tthis.session,\n\t\t\tthis.httpServer\n\t\t);\n\n\t\t/**\n\t\t * @type {Object}\n\t\t */\n\t\tthis.wss = this.ws.getWss();\n\n\t\t_instance = this;\n\t}\n\n\t/**\n\t * Destroys the instance\n\t * @param {Function} [done] Callback when done\n\t * @returns {Promise<undefined>}\n\t */\n\tasync destroy(done = () => {}) {\n\t\tif (this.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.emit(\"meeseOS/core:destroy\");\n\n\t\tlogger.info(\"Shutting down...\");\n\n\t\tif (this.wss) {\n\t\t\tthis.wss.close();\n\t\t}\n\n\t\tconst finish = (error) => {\n\t\t\tif (error) {\n\t\t\t\tlogger.error(error);\n\t\t\t}\n\n\t\t\tif (this.httpServer) {\n\t\t\t\tthis.httpServer.close(done);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\t\t};\n\n\t\ttry {\n\t\t\tawait super.destroy();\n\t\t\tfinish();\n\t\t} catch (e) {\n\t\t\tfinish(e);\n\t\t}\n\t}\n\n\t/**\n\t * Starts the server\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync start() {\n\t\tif (!this.started) {\n\t\t\tlogger.info(\"Starting services...\");\n\n\t\t\tawait super.start();\n\n\t\t\tlogger.success(\"Initialized!\");\n\n\t\t\tawait this.listen();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Initializes the server\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync boot() {\n\t\tif (this.booted) return true;\n\t\tthis.emit(\"meeseOS/core:start\");\n\n\t\tif (this.configuration.logging) {\n\t\t\tthis.wss.on(\"connection\", (c) => {\n\t\t\t\tlogger.log(\"WebSocket connection opened\");\n\t\t\t\tc.on(\"close\", () => logger.log(\"WebSocket connection closed\"));\n\t\t\t});\n\n\t\t\tif (this.configuration.morgan) {\n\t\t\t\tthis.app.use(morgan(this.configuration.morgan));\n\t\t\t}\n\t\t}\n\n\t\tlogger.info(\"Initializing services...\");\n\n\t\tawait super.boot();\n\t\tthis.emit(\"init\");\n\t\tawait this.start();\n\t\tthis.emit(\"meeseOS/core:started\");\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Opens HTTP server\n\t */\n\tlisten() {\n\t\tconst httpPort = this.config(\"port\");\n\t\tconst httpHost = this.config(\"bind\");\n\t\tconst wsPort = this.config(\"ws.port\") || httpPort;\n\t\tconst pub = this.config(\"public\");\n\t\tconst session = path.basename(\n\t\t\tpath.dirname(this.config(\"session.store.module\"))\n\t\t);\n\t\tconst dist = pub.replace(process.cwd(), \"\");\n\t\tconst secure = this.config(\"https.enabled\", false);\n\t\tconst proto = (prefix) => `${prefix}${secure ? \"s\" : \"\"}://`;\n\t\tconst host = (port) => `${httpHost}:${port}`;\n\n\t\tlogger.info(\"Opening server connection\");\n\n\t\tconst checkFile = path.join(pub, this.configuration.index);\n\t\tif (!fs.existsSync(checkFile)) {\n\t\t\tlogger.warn(\n\t\t\t\t\"Missing files in \\\"dist/\\\" directory. Did you forget to run \\\"npm run build\\\" ?\"\n\t\t\t);\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tthis.httpServer.listen(httpPort, httpHost, (e) => {\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlogger.success(`Using '${session}' sessions`);\n\t\t\t\t\t\tlogger.success(`Serving '${dist}'`);\n\t\t\t\t\t\tlogger.success(\n\t\t\t\t\t\t\t`WebSocket listening on ${proto(\"ws\")}${host(wsPort)}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tlogger.success(\n\t\t\t\t\t\t\t`Server listening on ${proto(\"http\")}${host(httpPort)}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Broadcast given event to client\n\t * @param {String} name Event name\n\t * @param {Array} params A list of parameters to send to client\n\t * @param {Function} [filter] A function to filter clients\n\t */\n\tbroadcast(name, params, filter) {\n\t\tfilter = filter || (() => true);\n\t\tif (!this.ws) return;\n\n\t\tthis.wss.clients // This is a Set\n\t\t\t.forEach((client) => {\n\t\t\t\tif (!client._meeseOS_client) return;\n\n\t\t\t\tif (filter(client)) {\n\t\t\t\t\tclient.send(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Broadcast given event to all clients\n\t * @param {String} name Event name\n\t * @param {Array} ...params A list of parameters to send to client\n\t */\n\tbroadcastAll(name, ...params) {\n\t\treturn this.broadcast(name, params);\n\t}\n\n\t/**\n\t * Broadcast given event to client filtered by username\n\t * @param {String} username Username to send to\n\t * @param {String} name Event name\n\t * @param {Array} ...params A list of parameters to send to client\n\t */\n\tbroadcastUser(username, name, ...params) {\n\t\treturn this.broadcast(name, params, (client) => {\n\t\t\treturn client._meeseOS_client.username === username;\n\t\t});\n\t}\n\n\t/**\n\t * Gets the server instance\n\t * @returns {Core}\n\t */\n\tstatic getInstance() {\n\t\treturn _instance;\n\t}\n}\n\nmodule.exports = Core;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/core.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 89,
    "kind": "variable",
    "name": "CoreBase",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~CoreBase",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 90,
    "kind": "variable",
    "name": "argvToConfig",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~argvToConfig",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 43,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 91,
    "kind": "variable",
    "name": "defaultConfiguration",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~defaultConfiguration",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 92,
    "kind": "variable",
    "name": "logger",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~logger",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 93,
    "kind": "class",
    "name": "Core",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~Core",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/core.js",
    "importStyle": "Core",
    "description": "MeeseOS Server Core",
    "lineNumber": 58,
    "interface": false,
    "extends": [
      "CoreBase"
    ]
  },
  {
    "__docId__": 94,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#constructor",
    "access": "public",
    "description": "Creates a new instance",
    "lineNumber": 64,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "cfg",
        "description": "Configuration tree"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Options"
      }
    ]
  },
  {
    "__docId__": 95,
    "kind": "member",
    "name": "logger",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#logger",
    "access": "public",
    "description": null,
    "lineNumber": 83,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 96,
    "kind": "member",
    "name": "app",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#app",
    "access": "public",
    "description": "",
    "lineNumber": 88,
    "type": {
      "nullable": null,
      "types": [
        "Express"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 97,
    "kind": "member",
    "name": "httpServer",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#httpServer",
    "access": "public",
    "description": "",
    "lineNumber": 97,
    "type": {
      "nullable": null,
      "types": [
        "http.Server",
        "https.Server"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 98,
    "kind": "member",
    "name": "session",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#session",
    "access": "public",
    "description": "",
    "lineNumber": 104,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 99,
    "kind": "member",
    "name": "ws",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#ws",
    "access": "public",
    "description": "",
    "lineNumber": 109,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 100,
    "kind": "member",
    "name": "wss",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#wss",
    "access": "public",
    "description": "",
    "lineNumber": 119,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 101,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/core.js~Core#destroy",
    "access": "public",
    "description": "Destroys the instance",
    "lineNumber": 129,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": true,
        "name": "done",
        "description": "Callback when done"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 102,
    "kind": "method",
    "name": "start",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/core.js~Core#start",
    "access": "public",
    "description": "Starts the server",
    "lineNumber": 166,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 103,
    "kind": "method",
    "name": "boot",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/core.js~Core#boot",
    "access": "public",
    "description": "Initializes the server",
    "lineNumber": 184,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 104,
    "kind": "method",
    "name": "listen",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#listen",
    "access": "public",
    "description": "Opens HTTP server",
    "lineNumber": 212,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 105,
    "kind": "method",
    "name": "broadcast",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#broadcast",
    "access": "public",
    "description": "Broadcast given event to client",
    "lineNumber": 263,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Event name"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "A list of parameters to send to client"
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": true,
        "name": "filter",
        "description": "A function to filter clients"
      }
    ],
    "return": null
  },
  {
    "__docId__": 106,
    "kind": "method",
    "name": "broadcastAll",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#broadcastAll",
    "access": "public",
    "description": "Broadcast given event to all clients",
    "lineNumber": 287,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Event name"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "...params",
        "description": "A list of parameters to send to client"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 107,
    "kind": "method",
    "name": "broadcastUser",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#broadcastUser",
    "access": "public",
    "description": "Broadcast given event to client filtered by username",
    "lineNumber": 297,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "username",
        "description": "Username to send to"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Event name"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "...params",
        "description": "A list of parameters to send to client"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 108,
    "kind": "method",
    "name": "getInstance",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/core.js~Core.getInstance",
    "access": "public",
    "description": "Gets the server instance",
    "lineNumber": 307,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Core}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 109,
    "kind": "file",
    "name": "src/filesystem.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst { methodArguments } = require(\"./utils/vfs\");\nconst systemAdapter = require(\"./adapters/vfs/system\");\nconst { v1: uuid } = require(\"uuid\");\nconst mime = require(\"mime\");\nconst path = require(\"path\");\nconst vfs = require(\"./vfs\");\nconst { closeWatches } = require(\"./utils/core.js\");\nconst consola = require(\"consola\");\nconst logger = consola.withTag(\"Filesystem\");\n\n/**\n * @typedef {Object} Mountpoint\n * @property {String} [uuid]\n * @property {String} [root]\n * @property {Object} [attributes]\n */\n\n/**\n * TODO: typedef\n * @typedef {Object} FilesystemAdapter\n */\n\n/**\n * Filesystem Service Adapter Option Map\n * @typedef {{name: FilesystemAdapter}} FilesystemAdapterMap\n */\n\n/**\n * Filesystem Service Options\n * @typedef {Object} FilesystemOptions\n * @property {FilesystemAdapterMap} [adapters]\n */\n\n/**\n * Filesystem Internal Call Options\n * @typedef {Object} FilesystemCallOptions\n * @property {String} method VFS Method name\n * @property {Object} [user] User session data\n * @property {Object} [session] Session data\n */\n\n/**\n * MeeseOS Virtual Filesystem\n */\nclass Filesystem {\n\t/**\n\t * Creates a new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {FilesystemOptions} [options] Instance options\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {Mountpoint[]}\n\t\t */\n\t\tthis.mountpoints = [];\n\n\t\t/**\n\t\t * @type {FilesystemAdapterMap}\n\t\t */\n\t\tthis.adapters = {};\n\n\t\tthis.watches = [];\n\n\t\tthis.router = null;\n\n\t\tthis.methods = {};\n\n\t\t/**\n\t\t * @type {FilesystemOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\tadapters: {},\n\t\t\t...options,\n\t\t};\n\t}\n\n\t/**\n\t * Destroys the instance.\n\t * @returns {Promise<undefined>}\n\t */\n\tasync destroy() {\n\t\tconst watches = this.watches\n\t\t\t.filter(({ watch }) => {\n\t\t\t\treturn watch && typeof watch.close === \"function\";\n\t\t\t})\n\t\t\t.map(({ watch }) => watch);\n\n\t\tawait closeWatches(watches);\n\n\t\tthis.watches = [];\n\t}\n\n\t/**\n\t * Initializes the Filesystem.\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync init() {\n\t\tconst adapters = {\n\t\t\tsystem: systemAdapter,\n\t\t\t...this.options.adapters,\n\t\t};\n\n\t\tthis.adapters = Object.keys(adapters).reduce((result, iter) => ({\n\t\t\t[iter]: adapters[iter](this.core),\n\t\t\t...result,\n\t\t}), {});\n\n\t\t// Routes\n\t\tconst { router, methods } = vfs(this.core);\n\t\tthis.router = router;\n\t\tthis.methods = methods;\n\n\t\t// Mimes\n\t\tconst { define } = this.core.config(\"mime\", { define: {}, filenames: {} });\n\t\tmime.define(define, { force: true });\n\n\t\t// Mountpoints\n\t\tawait Promise.all(\n\t\t\tthis.core.config(\"vfs.mountpoints\").map((mount) => this.mount(mount))\n\t\t);\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Gets the MIME type of a file.\n\t * @param {String} filename Input filename or path\n\t * @returns {String}\n\t */\n\tmime(filename) {\n\t\tconst { filenames } = this.core.config(\"mime\", {\n\t\t\tdefine: {},\n\t\t\tfilenames: {},\n\t\t});\n\n\t\treturn filenames[path.basename(filename)]\n\t\t\t? filenames[path.basename(filename)]\n\t\t\t: mime.getType(filename) || \"application/octet-stream\";\n\t}\n\n\t/**\n\t * Crates a VFS request.\n\t * @param {Request|Object} req HTTP Request object\n\t * @param {Response|Object} [res] HTTP Response object\n\t * @returns {Promise<*>}\n\t */\n\trequest(name, req, res = {}) {\n\t\treturn this.methods[name](req, res);\n\t}\n\n\t/**\n\t * Performs a VFS request with simulated HTTP request.\n\t * @param {FilesystemCallOptions} options Request options\n\t * @param {*} ...args Arguments to pass to VFS method\n\t * @returns {Promise<*>}\n\t */\n\tcall(options, ...args) {\n\t\tconst { method, user, session } = {\n\t\t\tuser: {},\n\t\t\tsession: null,\n\t\t\t...options,\n\t\t};\n\n\t\tconst req = methodArguments[method].reduce(\n\t\t\t({ fields, files }, key, index) => {\n\t\t\t\tconst arg = args[index];\n\t\t\t\tif (typeof key === \"function\") {\n\t\t\t\t\tfiles = Object.assign(key(arg), files);\n\t\t\t\t} else {\n\t\t\t\t\tfields = {\n\t\t\t\t\t\t[key]: arg,\n\t\t\t\t\t\t...fields,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { fields, files };\n\t\t\t},\n\t\t\t{ fields: {}, files: {} }\n\t\t);\n\n\t\treq.session = session || { user };\n\n\t\treturn this.request(method, req);\n\t}\n\n\t/**\n\t * Creates realpath VFS request.\n\t * @param {String} filename The path\n\t * @param {AuthUserProfile} [user] User session object\n\t * @returns {Promise<String>}\n\t */\n\trealpath(filename, user = {}) {\n\t\treturn this.methods.realpath({\n\t\t\tsession: {\n\t\t\t\tuser: {\n\t\t\t\t\tgroups: [],\n\t\t\t\t\t...user,\n\t\t\t\t},\n\t\t\t},\n\t\t\tfields: {\n\t\t\t\tpath: filename,\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Mounts given mountpoint.\n\t * @param {Mountpoint} mount Mountpoint\n\t * @returns {Mountpoint} the mountpoint\n\t */\n\tasync mount(mount) {\n\t\tconst mountpoint = {\n\t\t\tid: uuid(),\n\t\t\troot: `${mount.name}:/`,\n\t\t\tattributes: {},\n\t\t\t...mount,\n\t\t};\n\n\t\tthis.mountpoints.push(mountpoint);\n\n\t\tlogger.success(\"Mounted\", mountpoint.name);\n\n\t\tawait this.watch(mountpoint);\n\n\t\treturn mountpoint;\n\t}\n\n\t/**\n\t * Unmounts given mountpoint.\n\t * @param {Mountpoint} mount Mountpoint\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync unmount(mountpoint) {\n\t\tconst found = this.watches.find((w) => w.id === mountpoint.id);\n\n\t\tif (found && found.watch) {\n\t\t\tawait found.watch.close();\n\t\t}\n\n\t\tconst index = this.mountpoints.indexOf(mountpoint);\n\n\t\tif (index !== -1) {\n\t\t\tthis.mountpoints.splice(index, 1);\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Set up a watch for given mountpoint.\n\t * @param {Mountpoint} mountpoint The mountpoint\n\t * @returns {Promise<undefined>}\n\t */\n\tasync watch(mountpoint) {\n\t\tif (\n\t\t\t!mountpoint.attributes.watch ||\n\t\t\tthis.core.config(\"vfs.watch\") === false ||\n\t\t\t!mountpoint.attributes.root\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst adapter = await (mountpoint.adapter\n\t\t\t? this.adapters[mountpoint.adapter]\n\t\t\t: this.adapters.system);\n\n\t\tif (typeof adapter.watch === \"function\") {\n\t\t\tawait this._watch(mountpoint, adapter);\n\t\t}\n\t}\n\n\t/**\n\t * Internal method for setting up watch for given mountpoint adapter.\n\t * @param {Mountpoint} mountpoint The mountpoint\n\t * @param {FilesystemAdapter} adapter The adapter\n\t * @returns {Promise<undefined>}\n\t */\n\tasync _watch(mountpoint, adapter) {\n\t\tconst watch = await adapter.watch(mountpoint, (args, dir, type) => {\n\t\t\tconst target = mountpoint.name + \":/\" + dir;\n\t\t\tconst keys = Object.keys(args);\n\t\t\tconst filter = keys.length === 0\n\t\t\t\t? () => true\n\t\t\t\t: (ws) => keys.every((k) => ws._meeseOS_client[k] === args[k]);\n\n\t\t\tthis.core.emit(\"meeseOS/vfs:watch:change\", {\n\t\t\t\tmountpoint,\n\t\t\t\ttarget,\n\t\t\t\ttype,\n\t\t\t});\n\n\t\t\tthis.core.broadcast(\n\t\t\t\t\"meeseOS/vfs:watch:change\",\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tpath: target,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t},\n\t\t\t\t\targs,\n\t\t\t\t],\n\t\t\t\tfilter\n\t\t\t);\n\t\t});\n\n\t\twatch.on(\"error\", (error) => logger.warn(\"Mountpoint watch error\", error));\n\n\t\tthis.watches.push({\n\t\t\tid: mountpoint.id,\n\t\t\twatch,\n\t\t});\n\n\t\tlogger.info(\"Watching mountpoint\", mountpoint.name);\n\t}\n}\n\nmodule.exports = Filesystem;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/filesystem.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 110,
    "kind": "variable",
    "name": "methodArguments",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~methodArguments",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/filesystem.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 111,
    "kind": "variable",
    "name": "closeWatches",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~closeWatches",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/filesystem.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 112,
    "kind": "variable",
    "name": "logger",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~logger",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/filesystem.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 113,
    "kind": "typedef",
    "name": "Mountpoint",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~Mountpoint",
    "access": "public",
    "description": "",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "uuid",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "root",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "attributes",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "Mountpoint"
    }
  },
  {
    "__docId__": 114,
    "kind": "typedef",
    "name": "FilesystemAdapter",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~FilesystemAdapter",
    "access": "public",
    "description": "TODO: typedef",
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "FilesystemAdapter"
    }
  },
  {
    "__docId__": 115,
    "kind": "typedef",
    "name": "FilesystemAdapterMap",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~FilesystemAdapterMap",
    "access": "public",
    "description": "Filesystem Service Adapter Option Map",
    "type": {
      "types": [
        "{name: FilesystemAdapter}"
      ],
      "optional": false,
      "name": "FilesystemAdapterMap"
    }
  },
  {
    "__docId__": 116,
    "kind": "typedef",
    "name": "FilesystemOptions",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~FilesystemOptions",
    "access": "public",
    "description": "Filesystem Service Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "FilesystemAdapterMap"
        ],
        "spread": false,
        "optional": true,
        "name": "adapters",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "FilesystemOptions"
    }
  },
  {
    "__docId__": 117,
    "kind": "typedef",
    "name": "FilesystemCallOptions",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~FilesystemCallOptions",
    "access": "public",
    "description": "Filesystem Internal Call Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": "VFS Method name"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "user",
        "description": "User session data"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "session",
        "description": "Session data"
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "FilesystemCallOptions"
    }
  },
  {
    "__docId__": 118,
    "kind": "class",
    "name": "Filesystem",
    "memberof": "src/filesystem.js",
    "static": true,
    "longname": "src/filesystem.js~Filesystem",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/filesystem.js",
    "importStyle": "Filesystem",
    "description": "MeeseOS Virtual Filesystem",
    "lineNumber": 77,
    "interface": false
  },
  {
    "__docId__": 119,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#constructor",
    "access": "public",
    "description": "Creates a new instance.",
    "lineNumber": 83,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "FilesystemOptions"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Instance options"
      }
    ]
  },
  {
    "__docId__": 120,
    "kind": "member",
    "name": "core",
    "memberof": "src/filesystem.js~Filesystem",
    "static": false,
    "longname": "src/filesystem.js~Filesystem#core",
    "access": "public",
    "description": "",
    "lineNumber": 87,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 121,
    "kind": "member",
    "name": "mountpoints",
    "memberof": "src/filesystem.js~Filesystem",
    "static": false,
    "longname": "src/filesystem.js~Filesystem#mountpoints",
    "access": "public",
    "description": "",
    "lineNumber": 92,
    "type": {
      "nullable": null,
      "types": [
        "Mountpoint[]"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 122,
    "kind": "member",
    "name": "adapters",
    "memberof": "src/filesystem.js~Filesystem",
    "static": false,
    "longname": "src/filesystem.js~Filesystem#adapters",
    "access": "public",
    "description": "",
    "lineNumber": 97,
    "type": {
      "nullable": null,
      "types": [
        "FilesystemAdapterMap"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 123,
    "kind": "member",
    "name": "watches",
    "memberof": "src/filesystem.js~Filesystem",
    "static": false,
    "longname": "src/filesystem.js~Filesystem#watches",
    "access": "public",
    "description": null,
    "lineNumber": 99,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 124,
    "kind": "member",
    "name": "router",
    "memberof": "src/filesystem.js~Filesystem",
    "static": false,
    "longname": "src/filesystem.js~Filesystem#router",
    "access": "public",
    "description": null,
    "lineNumber": 101,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 125,
    "kind": "member",
    "name": "methods",
    "memberof": "src/filesystem.js~Filesystem",
    "static": false,
    "longname": "src/filesystem.js~Filesystem#methods",
    "access": "public",
    "description": null,
    "lineNumber": 103,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 126,
    "kind": "member",
    "name": "options",
    "memberof": "src/filesystem.js~Filesystem",
    "static": false,
    "longname": "src/filesystem.js~Filesystem#options",
    "access": "public",
    "description": "",
    "lineNumber": 108,
    "type": {
      "nullable": null,
      "types": [
        "FilesystemOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 127,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#destroy",
    "access": "public",
    "description": "Destroys the instance.",
    "lineNumber": 118,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 129,
    "kind": "method",
    "name": "init",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#init",
    "access": "public",
    "description": "Initializes the Filesystem.",
    "lineNumber": 134,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 133,
    "kind": "method",
    "name": "mime",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#mime",
    "access": "public",
    "description": "Gets the MIME type of a file.",
    "lineNumber": 167,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "filename",
        "description": "Input filename or path"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 134,
    "kind": "method",
    "name": "request",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#request",
    "access": "public",
    "description": "Crates a VFS request.",
    "lineNumber": 184,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<*>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request",
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "HTTP Request object"
      },
      {
        "nullable": null,
        "types": [
          "Response",
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "res",
        "description": "HTTP Response object"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<*>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 135,
    "kind": "method",
    "name": "call",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#call",
    "access": "public",
    "description": "Performs a VFS request with simulated HTTP request.",
    "lineNumber": 194,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<*>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "FilesystemCallOptions"
        ],
        "spread": false,
        "optional": false,
        "name": "options",
        "description": "Request options"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": false,
        "name": "...args",
        "description": "Arguments to pass to VFS method"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<*>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 136,
    "kind": "method",
    "name": "realpath",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#realpath",
    "access": "public",
    "description": "Creates realpath VFS request.",
    "lineNumber": 229,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<String>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "filename",
        "description": "The path"
      },
      {
        "nullable": null,
        "types": [
          "AuthUserProfile"
        ],
        "spread": false,
        "optional": true,
        "name": "user",
        "description": "User session object"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<String>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 137,
    "kind": "method",
    "name": "mount",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#mount",
    "access": "public",
    "description": "Mounts given mountpoint.",
    "lineNumber": 248,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Mountpoint} the mountpoint"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Mountpoint"
        ],
        "spread": false,
        "optional": false,
        "name": "mount",
        "description": "Mountpoint"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Mountpoint"
      ],
      "spread": false,
      "description": "the mountpoint"
    }
  },
  {
    "__docId__": 138,
    "kind": "method",
    "name": "unmount",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#unmount",
    "access": "public",
    "description": "Unmounts given mountpoint.",
    "lineNumber": 270,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Mountpoint"
        ],
        "spread": false,
        "optional": false,
        "name": "mount",
        "description": "Mountpoint"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 139,
    "kind": "method",
    "name": "watch",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#watch",
    "access": "public",
    "description": "Set up a watch for given mountpoint.",
    "lineNumber": 293,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Mountpoint"
        ],
        "spread": false,
        "optional": false,
        "name": "mountpoint",
        "description": "The mountpoint"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 140,
    "kind": "method",
    "name": "_watch",
    "memberof": "src/filesystem.js~Filesystem",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/filesystem.js~Filesystem#_watch",
    "access": "private",
    "description": "Internal method for setting up watch for given mountpoint adapter.",
    "lineNumber": 317,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Mountpoint"
        ],
        "spread": false,
        "optional": false,
        "name": "mountpoint",
        "description": "The mountpoint"
      },
      {
        "nullable": null,
        "types": [
          "FilesystemAdapter"
        ],
        "spread": false,
        "optional": false,
        "name": "adapter",
        "description": "The adapter"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 141,
    "kind": "file",
    "name": "src/package.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst path = require(\"path\");\nconst chokidar = require(\"chokidar\");\n\n/**\n * TODO: typedef\n * @typedef {Object} PackageMetadata\n */\n\n/**\n * Package Options\n * @typedef {Object} PackageOptions\n * @property {String} filename\n * @property {PackageMetadata} metadata\n */\n\n/**\n * MeeseOS Package Abstraction\n */\nclass Package {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {PackageOptions} [options={}] Instance options\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\tthis.script = options.metadata.server\n\t\t\t? path.resolve(path.dirname(options.filename), options.metadata.server)\n\t\t\t: null;\n\n\t\t/**\n\t\t * @type {String}\n\t\t */\n\t\tthis.filename = options.filename;\n\n\t\t/**\n\t\t * @type {PackageMetadata}\n\t\t */\n\t\tthis.metadata = options.metadata;\n\n\t\tthis.handler = null;\n\n\t\tthis.watcher = null;\n\t}\n\n\t/**\n\t * Destroys instance.\n\t */\n\tasync destroy() {\n\t\tthis.action(\"destroy\");\n\n\t\tif (this.watcher) {\n\t\t\tawait this.watcher.close();\n\t\t\tthis.watcher = null;\n\t\t}\n\t}\n\n\t/**\n\t * Run method on package script.\n\t * @param {String} method Method name\n\t * @param {*} [...args] Pass arguments\n\t * @returns {Boolean}\n\t */\n\taction(method, ...args) {\n\t\ttry {\n\t\t\tif (this.handler && typeof this.handler[method] === \"function\") {\n\t\t\t\tthis.handler[method](...args);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.core.logger.warn(e);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Validates this package.\n\t * @param {PackageMetadata[]} manifest Global manifest\n\t * @returns {Boolean}\n\t */\n\tvalidate(manifest) {\n\t\treturn (\n\t\t\tthis.script &&\n\t\t\tthis.metadata &&\n\t\t\tBoolean(manifest.find((iter) => iter.name === this.metadata.name))\n\t\t);\n\t}\n\n\t/**\n\t * Initializes this package.\n\t * @returns {Promise<undefined>}\n\t */\n\tinit() {\n\t\tconst mod = require(this.script);\n\t\tconst handler = typeof mod.default === \"function\" ? mod.default : mod;\n\n\t\tthis.handler = handler(this.core, this);\n\n\t\tif (typeof this.handler.init === \"function\") {\n\t\t\treturn this.handler.init();\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Starts server scripts.\n\t * @returns {Promise<undefined>}\n\t */\n\tstart() {\n\t\treturn this.action(\"start\");\n\t}\n\n\t/**\n\t * Creates a watch in package dist.\n\t * @param {Function} cb Callback function on watch changes\n\t * @returns {String} Watched path\n\t */\n\twatch(cb) {\n\t\tconst pub = this.core.config(\"public\");\n\t\tconst dist = path.join(pub, \"apps\", this.metadata.name);\n\n\t\tthis.watcher = chokidar.watch(dist);\n\t\tthis.watcher.on(\"change\", () => cb(this.metadata));\n\n\t\treturn dist;\n\t}\n\n\t/**\n\t * Resolve an URL for resource.\n\t * @param {String} path Input path\n\t * @returns {String}\n\t */\n\tresource(path) {\n\t\tif (path.charAt(0) !== \"/\") {\n\t\t\tpath = `/${path}`;\n\t\t}\n\n\t\treturn `/apps/${this.metadata.name}${path}`;\n\t}\n}\n\nmodule.exports = Package;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/package.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 142,
    "kind": "typedef",
    "name": "PackageMetadata",
    "memberof": "src/package.js",
    "static": true,
    "longname": "src/package.js~PackageMetadata",
    "access": "public",
    "description": "TODO: typedef",
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "PackageMetadata"
    }
  },
  {
    "__docId__": 143,
    "kind": "typedef",
    "name": "PackageOptions",
    "memberof": "src/package.js",
    "static": true,
    "longname": "src/package.js~PackageOptions",
    "access": "public",
    "description": "Package Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "filename",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "PackageMetadata"
        ],
        "spread": false,
        "optional": false,
        "name": "metadata",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "PackageOptions"
    }
  },
  {
    "__docId__": 144,
    "kind": "class",
    "name": "Package",
    "memberof": "src/package.js",
    "static": true,
    "longname": "src/package.js~Package",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/package.js",
    "importStyle": "Package",
    "description": "MeeseOS Package Abstraction",
    "lineNumber": 49,
    "interface": false
  },
  {
    "__docId__": 145,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 55,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "PackageOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Instance options"
      }
    ]
  },
  {
    "__docId__": 146,
    "kind": "member",
    "name": "core",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#core",
    "access": "public",
    "description": "",
    "lineNumber": 59,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 147,
    "kind": "member",
    "name": "script",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#script",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 148,
    "kind": "member",
    "name": "filename",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#filename",
    "access": "public",
    "description": "",
    "lineNumber": 68,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 149,
    "kind": "member",
    "name": "metadata",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#metadata",
    "access": "public",
    "description": "",
    "lineNumber": 73,
    "type": {
      "nullable": null,
      "types": [
        "PackageMetadata"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 150,
    "kind": "member",
    "name": "handler",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#handler",
    "access": "public",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 151,
    "kind": "member",
    "name": "watcher",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#watcher",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 152,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/package.js~Package#destroy",
    "access": "public",
    "description": "Destroys instance.",
    "lineNumber": 83,
    "params": [],
    "return": null
  },
  {
    "__docId__": 154,
    "kind": "method",
    "name": "action",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#action",
    "access": "public",
    "description": "Run method on package script.",
    "lineNumber": 98,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": "Method name"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": true,
        "name": "...args",
        "description": "Pass arguments"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 155,
    "kind": "method",
    "name": "validate",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#validate",
    "access": "public",
    "description": "Validates this package.",
    "lineNumber": 117,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "PackageMetadata[]"
        ],
        "spread": false,
        "optional": false,
        "name": "manifest",
        "description": "Global manifest"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 156,
    "kind": "method",
    "name": "init",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#init",
    "access": "public",
    "description": "Initializes this package.",
    "lineNumber": 129,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 158,
    "kind": "method",
    "name": "start",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#start",
    "access": "public",
    "description": "Starts server scripts.",
    "lineNumber": 146,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 159,
    "kind": "method",
    "name": "watch",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#watch",
    "access": "public",
    "description": "Creates a watch in package dist.",
    "lineNumber": 155,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} Watched path"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "cb",
        "description": "Callback function on watch changes"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "Watched path"
    }
  },
  {
    "__docId__": 161,
    "kind": "method",
    "name": "resource",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#resource",
    "access": "public",
    "description": "Resolve an URL for resource.",
    "lineNumber": 170,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": "Input path"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 162,
    "kind": "file",
    "name": "src/packages.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst fg = require(\"fast-glob\");\nconst path = require(\"path\");\nconst Package = require(\"./package.js\");\nconst consola = require(\"consola\");\nconst logger = consola.withTag(\"Packages\");\n\nconst relative = (filename) => filename.replace(process.cwd(), \"\");\n\nconst readOrDefault = (filename) =>\n\tfs.existsSync(filename) ? fs.readJsonSync(filename) : [];\n\n/**\n * Package Service Options\n * @typedef {Object} PackagesOptions\n * @property {String} [manifestFile] Manifest filename\n * @property {String} [discoveredFile] Discovery output file\n */\n\n/**\n * MeeseOS Package Management\n */\nclass Packages {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {PackagesOptions} [options={}] Instance options\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {Package[]}\n\t\t */\n\t\tthis.packages = [];\n\n\t\tthis.hotReloading = {};\n\n\t\t/**\n\t\t * @type {PackagesOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\tmanifestFile: null,\n\t\t\tdiscoveredFile: null,\n\t\t\t...options,\n\t\t};\n\t}\n\n\t/**\n\t * Initializes packages.\n\t */\n\tinit() {\n\t\tthis.core.on(\"meeseOS/application:socket:message\", (ws, ...params) => {\n\t\t\tthis.handleMessage(ws, params);\n\t\t});\n\n\t\treturn this.load();\n\t}\n\n\t/**\n\t * Loads package manager.\n\t * @returns {Promise<Boolean>}\n\t */\n\tload() {\n\t\treturn this.createLoader().then((packages) => {\n\t\t\tthis.packages = this.packages.concat(packages);\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t/**\n\t * Loads all packages.\n\t * @returns {Promise<Package[]>}\n\t */\n\tcreateLoader() {\n\t\tconst result = [];\n\t\tconst { discoveredFile, manifestFile } = this.options;\n\t\tconst discovered = readOrDefault(discoveredFile);\n\t\tconst manifest = readOrDefault(manifestFile);\n\t\tconst sources = discovered.map((d) => path.join(d, \"metadata.json\"));\n\n\t\tlogger.info(\"Using package discovery file\", relative(discoveredFile));\n\t\tlogger.info(\"Using package manifest file\", relative(manifestFile));\n\n\t\tconst stream = fg.stream(sources, {\n\t\t\textension: false,\n\t\t\tbrace: false,\n\t\t\tdeep: 1,\n\t\t\tcase: false,\n\t\t});\n\n\t\tstream.on(\"error\", (error) => logger.error(error));\n\t\tstream.on(\"data\", (filename) => {\n\t\t\tresult.push(this.loadPackage(filename, manifest));\n\t\t});\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tstream.once(\"end\", () => {\n\t\t\t\tPromise.all(result)\n\t\t\t\t\t.then((result) => result.filter((iter) => Boolean(iter.handler)))\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * When a package dist has changed.\n\t * @param {Package} pkg Package instance\n\t */\n\tonPackageChanged(pkg) {\n\t\tclearTimeout(this.hotReloading[pkg.metadata.name]);\n\n\t\tthis.hotReloading[pkg.metadata.name] = setTimeout(() => {\n\t\t\tlogger.debug(\"Sending reload signal for\", pkg.metadata.name);\n\t\t\tthis.core.broadcast(\"meeseOS/packages:package:changed\", [\n\t\t\t\tpkg.metadata.name,\n\t\t\t]);\n\t\t}, 500);\n\t}\n\n\t/**\n\t * Loads package data.\n\t * @param {String} filename Filename\n\t * @param {PackageMetadata} manifest Manifest\n\t * @returns {Promise<Package>}\n\t */\n\tloadPackage(filename, manifest) {\n\t\tconst done = (pkg, error) => {\n\t\t\tif (error) {\n\t\t\t\tlogger.warn(error);\n\t\t\t}\n\n\t\t\treturn Promise.resolve(pkg);\n\t\t};\n\n\t\treturn fs.readJson(filename).then((metadata) => {\n\t\t\tconst pkg = new Package(this.core, {\n\t\t\t\tfilename,\n\t\t\t\tmetadata,\n\t\t\t});\n\n\t\t\treturn this.initializePackage(pkg, manifest, done);\n\t\t});\n\t}\n\n\t/**\n\t * Initializes a package.\n\t * @returns {Promise<Package>}\n\t */\n\tinitializePackage(pkg, manifest, done) {\n\t\tif (pkg.validate(manifest)) {\n\t\t\tlogger.info(`Loading ${relative(pkg.script)}`);\n\n\t\t\ttry {\n\t\t\t\tif (this.core.configuration.development) {\n\t\t\t\t\tpkg.watch(() => {\n\t\t\t\t\t\tthis.onPackageChanged(pkg);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn pkg\n\t\t\t\t\t.init()\n\t\t\t\t\t.then(() => done(pkg))\n\t\t\t\t\t.catch((e) => done(pkg, e));\n\t\t\t} catch (e) {\n\t\t\t\treturn done(pkg, e);\n\t\t\t}\n\t\t}\n\n\t\treturn done(pkg);\n\t}\n\n\t/**\n\t * Starts packages.\n\t */\n\tstart() {\n\t\tthis.packages.forEach((pkg) => pkg.start());\n\t}\n\n\t/**\n\t * Destroys packages.\n\t * @returns {Promise<undefined>}\n\t */\n\tasync destroy() {\n\t\tawait Promise.all(this.packages.map((pkg) => pkg.destroy()));\n\n\t\tthis.packages = [];\n\t}\n\n\t/**\n\t * Handles an incoming message and signals an application.\n\t *\n\t * This will call the 'onmessage' event in your application server script.\n\t *\n\t * @param {WebSocket} ws Websocket Connection client\n\t * @param {Array} params A list of incoming parameters\n\t */\n\thandleMessage(ws, params) {\n\t\tconst { pid, name, args } = params[0];\n\t\tconst found = this.packages.findIndex(\n\t\t\t({ metadata }) => metadata.name === name\n\t\t);\n\n\t\tif (found !== -1) {\n\t\t\tconst { handler } = this.packages[found];\n\t\t\tif (handler && typeof handler.onmessage === \"function\") {\n\t\t\t\tconst respond = (...respondParams) =>\n\t\t\t\t\tws.send(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\tname: \"meeseOS/application:socket:message\",\n\t\t\t\t\t\t\tparams: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpid,\n\t\t\t\t\t\t\t\t\targs: respondParams,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\thandler.onmessage(ws, respond, args);\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = Packages;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/packages.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 163,
    "kind": "variable",
    "name": "logger",
    "memberof": "src/packages.js",
    "static": true,
    "longname": "src/packages.js~logger",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 164,
    "kind": "function",
    "name": "relative",
    "memberof": "src/packages.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/packages.js~relative",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "params": [
      {
        "name": "filename",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 165,
    "kind": "function",
    "name": "readOrDefault",
    "memberof": "src/packages.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/packages.js~readOrDefault",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "params": [
      {
        "name": "filename",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 166,
    "kind": "typedef",
    "name": "PackagesOptions",
    "memberof": "src/packages.js",
    "static": true,
    "longname": "src/packages.js~PackagesOptions",
    "access": "public",
    "description": "Package Service Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "manifestFile",
        "description": "Manifest filename"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "discoveredFile",
        "description": "Discovery output file"
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "PackagesOptions"
    }
  },
  {
    "__docId__": 167,
    "kind": "class",
    "name": "Packages",
    "memberof": "src/packages.js",
    "static": true,
    "longname": "src/packages.js~Packages",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/packages.js",
    "importStyle": "Packages",
    "description": "MeeseOS Package Management",
    "lineNumber": 53,
    "interface": false
  },
  {
    "__docId__": 168,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 59,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "PackagesOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Instance options"
      }
    ]
  },
  {
    "__docId__": 169,
    "kind": "member",
    "name": "core",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#core",
    "access": "public",
    "description": "",
    "lineNumber": 63,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 170,
    "kind": "member",
    "name": "packages",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#packages",
    "access": "public",
    "description": "",
    "lineNumber": 68,
    "type": {
      "nullable": null,
      "types": [
        "Package[]"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 171,
    "kind": "member",
    "name": "hotReloading",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#hotReloading",
    "access": "public",
    "description": null,
    "lineNumber": 70,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 172,
    "kind": "member",
    "name": "options",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#options",
    "access": "public",
    "description": "",
    "lineNumber": 75,
    "type": {
      "nullable": null,
      "types": [
        "PackagesOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 173,
    "kind": "method",
    "name": "init",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#init",
    "access": "public",
    "description": "Initializes packages.",
    "lineNumber": 85,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 174,
    "kind": "method",
    "name": "load",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#load",
    "access": "public",
    "description": "Loads package manager.",
    "lineNumber": 97,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 176,
    "kind": "method",
    "name": "createLoader",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#createLoader",
    "access": "public",
    "description": "Loads all packages.",
    "lineNumber": 109,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Package[]>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Package[]>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 177,
    "kind": "method",
    "name": "onPackageChanged",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#onPackageChanged",
    "access": "public",
    "description": "When a package dist has changed.",
    "lineNumber": 145,
    "params": [
      {
        "nullable": null,
        "types": [
          "Package"
        ],
        "spread": false,
        "optional": false,
        "name": "pkg",
        "description": "Package instance"
      }
    ],
    "return": null
  },
  {
    "__docId__": 178,
    "kind": "method",
    "name": "loadPackage",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#loadPackage",
    "access": "public",
    "description": "Loads package data.",
    "lineNumber": 162,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Package>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "filename",
        "description": "Filename"
      },
      {
        "nullable": null,
        "types": [
          "PackageMetadata"
        ],
        "spread": false,
        "optional": false,
        "name": "manifest",
        "description": "Manifest"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Package>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 179,
    "kind": "method",
    "name": "initializePackage",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#initializePackage",
    "access": "public",
    "description": "Initializes a package.",
    "lineNumber": 185,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Package>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Package>"
      ],
      "spread": false,
      "description": ""
    },
    "params": [
      {
        "name": "pkg",
        "types": [
          "*"
        ]
      },
      {
        "name": "manifest",
        "types": [
          "*"
        ]
      },
      {
        "name": "done",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 180,
    "kind": "method",
    "name": "start",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#start",
    "access": "public",
    "description": "Starts packages.",
    "lineNumber": 211,
    "params": [],
    "return": null
  },
  {
    "__docId__": 181,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/packages.js~Packages#destroy",
    "access": "public",
    "description": "Destroys packages.",
    "lineNumber": 219,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 183,
    "kind": "method",
    "name": "handleMessage",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#handleMessage",
    "access": "public",
    "description": "Handles an incoming message and signals an application.\n\nThis will call the 'onmessage' event in your application server script.",
    "lineNumber": 233,
    "params": [
      {
        "nullable": null,
        "types": [
          "WebSocket"
        ],
        "spread": false,
        "optional": false,
        "name": "ws",
        "description": "Websocket Connection client"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "A list of incoming parameters"
      }
    ],
    "return": null
  },
  {
    "__docId__": 184,
    "kind": "file",
    "name": "src/providers/auth.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meeseOS/common\");\nconst Auth = require(\"../auth.js\");\n\n/**\n * MeeseOS Auth Service Provider\n */\nclass AuthServiceProvider extends ServiceProvider {\n\tconstructor(core, options) {\n\t\tsuper(core, options);\n\n\t\tthis.auth = new Auth(core, options);\n\t}\n\n\t/**\n\t * A list of services this provider depends on.\n\t * @returns {String[]}\n\t */\n\tdepends() {\n\t\treturn [\"meeseOS/token-factory\"];\n\t}\n\n\tasync init() {\n\t\tconst { route, routeAuthenticated } = this.core.make(\"meeseOS/express\");\n\n\t\troute(\"post\", \"/register\", (req, res) => this.auth.register(req, res));\n\t\troute(\"post\", \"/login\", (req, res) => this.auth.login(req, res));\n\t\t// TODO: fix the issue of this not working when `routeAuthenticated` is used\n\t\troute(\"post\", \"/logout\", (req, res) => this.auth.logout(req, res));\n\n\t\tawait this.auth.init();\n\t}\n\n\tdestroy() {\n\t\tthis.auth.destroy();\n\t\tsuper.destroy();\n\t}\n}\n\nmodule.exports = AuthServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/auth.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 185,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/auth.js",
    "static": true,
    "longname": "src/providers/auth.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/auth.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 186,
    "kind": "class",
    "name": "AuthServiceProvider",
    "memberof": "src/providers/auth.js",
    "static": true,
    "longname": "src/providers/auth.js~AuthServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/providers/auth.js",
    "importStyle": "AuthServiceProvider",
    "description": "MeeseOS Auth Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 187,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "ignore": true
  },
  {
    "__docId__": 188,
    "kind": "member",
    "name": "auth",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#auth",
    "access": "public",
    "description": null,
    "lineNumber": 42,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 189,
    "kind": "method",
    "name": "depends",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#depends",
    "access": "public",
    "description": "A list of services this provider depends on.",
    "lineNumber": 49,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 190,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#init",
    "access": "public",
    "description": null,
    "lineNumber": 53,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 191,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 64,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 192,
    "kind": "file",
    "name": "src/providers/core.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst path = require(\"path\");\nconst express = require(\"express\");\nconst chokidar = require(\"chokidar\");\nconst bodyParser = require(\"body-parser\");\nconst proxy = require(\"express-http-proxy\");\nconst nocache = require(\"nocache\");\nconst { ServiceProvider } = require(\"@meeseOS/common\");\nconst {\n\tuseWebTokens,\n\tisAuthenticated,\n\tcloseWatches\n} = require(\"../utils/core.js\");\n\n/**\n * MeeseOS Core Service Provider\n */\nclass CoreServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options] Arguments\n\t */\n\tconstructor(core, options) {\n\t\tsuper(core, options);\n\n\t\t/**\n\t\t * @type {Array}\n\t\t */\n\t\tthis.watches = [];\n\t}\n\n\t/**\n\t * Initializes provider.\n\t */\n\tinit() {\n\t\tthis.initService();\n\t\tthis.initExtensions();\n\t\tthis.initResourceRoutes();\n\t\tthis.initSocketRoutes();\n\t\tthis.initProxies();\n\t}\n\n\t/**\n\t * Starts provider.\n\t */\n\tstart() {\n\t\tif (this.core.configuration.development) {\n\t\t\tthis.initDeveloperTools();\n\t\t}\n\t}\n\n\t/**\n\t * Get a list of services this provider registers.\n\t * @returns {String[]}\n\t */\n\tstatic provides() {\n\t\treturn [\"meeseOS/express\"];\n\t}\n\n\t/**\n\t * Destroys provider.\n\t */\n\tasync destroy() {\n\t\tawait closeWatches(this.watches);\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Initializes the service APIs.\n\t */\n\tinitService() {\n\t\tconst { app } = this.core;\n\t\tconst { requireAllGroups } = this.core.configuration.auth;\n\n\t\tconst middleware = {\n\t\t\troute: [],\n\t\t\trouteAuthenticated: [],\n\t\t};\n\n\t\tthis.core.singleton(\"meeseOS/express\", () => ({\n\t\t\tuseWebTokens,\n\t\t\tisAuthenticated,\n\n\t\t\tcall: (method, ...args) => app[method](...args),\n\t\t\tuse: (arg) => app.use(arg),\n\n\t\t\twebsocket: (p, cb) => app.ws(p, cb),\n\n\t\t\tmiddleware: (authentication, cb) => {\n\t\t\t\tmiddleware[authentication ? \"routeAuthenticated\" : \"route\"].push(cb);\n\t\t\t},\n\n\t\t\troute: (method, uri, cb) =>\n\t\t\t\tapp[method.toLowerCase()](uri, [...middleware.route], cb),\n\n\t\t\trouteAuthenticated: (\n\t\t\t\tmethod,\n\t\t\t\turi,\n\t\t\t\tcb,\n\t\t\t\tgroups = [],\n\t\t\t\tstrict = requireAllGroups\n\t\t\t) =>\n\t\t\t\tapp[method.toLowerCase()](\n\t\t\t\t\turi,\n\t\t\t\t\t[\n\t\t\t\t\t\t...middleware.routeAuthenticated,\n\t\t\t\t\t\tuseWebTokens(app),\n\t\t\t\t\t\tisAuthenticated(groups, strict)\n\t\t\t\t\t],\n\t\t\t\t\tcb\n\t\t\t\t),\n\n\t\t\trouter: () => {\n\t\t\t\tconst router = express.Router();\n\t\t\t\trouter.use(...middleware.route);\n\t\t\t\treturn router;\n\t\t\t},\n\n\t\t\trouterAuthenticated: (groups = [], strict = requireAllGroups) => {\n\t\t\t\tconst router = express.Router();\n\t\t\t\trouter.use(...middleware.routeAuthenticated);\n\t\t\t\trouter.use(useWebTokens(app));\n\t\t\t\trouter.use(isAuthenticated(groups, strict));\n\t\t\t\treturn router;\n\t\t\t},\n\t\t}));\n\t}\n\n\t/**\n\t * Initializes Express extensions.\n\t */\n\tinitExtensions() {\n\t\tconst { app, session, configuration } = this.core;\n\t\tconst limit = configuration.express.maxBodySize;\n\n\t\tif (configuration.development) {\n\t\t\tapp.use(nocache());\n\t\t} else {\n\t\t\tapp.disable(\"x-powered-by\");\n\t\t}\n\n\t\t// Handle sessions\n\t\tapp.use(session);\n\n\t\t// Handle bodies\n\t\tapp.use(\n\t\t\tbodyParser.urlencoded({\n\t\t\t\textended: false,\n\t\t\t\tlimit,\n\t\t\t})\n\t\t);\n\n\t\tapp.use(\n\t\t\tbodyParser.json({\n\t\t\t\tlimit,\n\t\t\t})\n\t\t);\n\n\t\tapp.use(\n\t\t\tbodyParser.raw({\n\t\t\t\tlimit,\n\t\t\t})\n\t\t);\n\t}\n\n\t/**\n\t * Initializes Express base routes, etc.\n\t */\n\tinitResourceRoutes() {\n\t\tconst { app, configuration } = this.core;\n\t\tconst indexFile = path.join(configuration.public, configuration.index);\n\n\t\tapp.get(\"/\", (req, res) => res.sendFile(indexFile));\n\t\tapp.use(\"/\", express.static(configuration.public));\n\n\t\t// Internal ping\n\t\tapp.get(\"/ping\", (req, res) => {\n\t\t\tthis.core.emit(\"meeseOS/core:ping\", req);\n\n\t\t\ttry {\n\t\t\t\treq.session.touch();\n\t\t\t} catch (e) {\n\t\t\t\tthis.core.logger.warn(e);\n\t\t\t}\n\n\t\t\tres.status(200).send(\"ok\");\n\t\t});\n\t}\n\n\t/**\n\t * Initializes Socket routes.\n\t */\n\tinitSocketRoutes() {\n\t\tconst { app } = this.core;\n\n\t\tapp.ws(\"/\", (ws, req) => {\n\t\t\tws.upgradeReq = ws.upgradeReq || req;\n\t\t\tws._meeseOS_client = { ...req.session.user };\n\n\t\t\tconst interval = this.core.config(\"ws.ping\", 0);\n\n\t\t\tconst pingInterval = interval\n\t\t\t\t? setInterval(() => {\n\t\t\t\t\tws.send(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\tname: \"meeseOS/core:ping\",\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t  }, interval)\n\t\t\t\t: undefined;\n\n\t\t\tws.on(\"close\", () => {\n\t\t\t\tclearInterval(pingInterval);\n\t\t\t});\n\n\t\t\tws.on(\"message\", (msg) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { name, params } = JSON.parse(msg);\n\n\t\t\t\t\tif (typeof name === \"string\" && params instanceof Array) {\n\t\t\t\t\t\t// We don't wanna allow any internal signals from the outside!\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tname.match(/^meeseOS/) &&\n\t\t\t\t\t\t\tname !== \"meeseOS/application:socket:message\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.core.emit(name, ws, ...params);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.core.logger.warn(e);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tws.send(\n\t\t\t\tJSON.stringify({\n\t\t\t\t\tname: \"meeseOS/core:connected\",\n\t\t\t\t\tparams: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcookie: {\n\t\t\t\t\t\t\t\tmaxAge: this.core.config(\"session.options.cookie.maxAge\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\n\t/**\n\t * Initializes Express proxies.\n\t */\n\tinitProxies() {\n\t\tconst { app, configuration } = this.core;\n\t\tconst proxies = (configuration.proxy || [])\n\t\t\t.map((item) => ({\n\t\t\t\tsource: null,\n\t\t\t\tdestination: null,\n\t\t\t\toptions: {},\n\t\t\t\t...item,\n\t\t\t}))\n\t\t\t.filter((item) => item.source && item.destination);\n\n\t\tproxies.forEach((item) => {\n\t\t\tthis.core.logger.info(`Proxying ${item.source} -> ${item.destination}`);\n\t\t\tapp.use(item.source, proxy(item.destination, item.options));\n\t\t});\n\t}\n\n\t/**\n\t * Initializes some developer features.\n\t */\n\tinitDeveloperTools() {\n\t\ttry {\n\t\t\tconst watchdir = path.resolve(this.core.configuration.public);\n\t\t\tconst watcher = chokidar.watch(watchdir);\n\n\t\t\twatcher.on(\"change\", (filename) => {\n\t\t\t\t// NOTE: 'ignored' does not work as expected with callback\n\t\t\t\t// ignored: str => str.match(/\\.(js|css)$/) === null\n\t\t\t\t// for unknown reasons\n\t\t\t\tif (!filename.match(/\\.(js|css)$/)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst relative = filename.replace(watchdir, \"\");\n\t\t\t\tthis.core.broadcast(\"meeseOS/dist:changed\", [relative]);\n\t\t\t});\n\n\t\t\tthis.watches.push(watcher);\n\t\t} catch (e) {\n\t\t\tthis.core.logger.warn(e);\n\t\t}\n\t}\n}\n\nmodule.exports = CoreServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/core.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 193,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/core.js",
    "static": true,
    "longname": "src/providers/core.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 194,
    "kind": "variable",
    "name": "useWebTokens",
    "memberof": "src/providers/core.js",
    "static": true,
    "longname": "src/providers/core.js~useWebTokens",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 40,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 195,
    "kind": "class",
    "name": "CoreServiceProvider",
    "memberof": "src/providers/core.js",
    "static": true,
    "longname": "src/providers/core.js~CoreServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/providers/core.js",
    "importStyle": "CoreServiceProvider",
    "description": "MeeseOS Core Service Provider",
    "lineNumber": 49,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 196,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 55,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 197,
    "kind": "member",
    "name": "watches",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#watches",
    "access": "public",
    "description": "",
    "lineNumber": 61,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 198,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#init",
    "access": "public",
    "description": "Initializes provider.",
    "lineNumber": 67,
    "params": [],
    "return": null
  },
  {
    "__docId__": 199,
    "kind": "method",
    "name": "start",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#start",
    "access": "public",
    "description": "Starts provider.",
    "lineNumber": 78,
    "params": [],
    "return": null
  },
  {
    "__docId__": 200,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/core.js~CoreServiceProvider.provides",
    "access": "public",
    "description": "Get a list of services this provider registers.",
    "lineNumber": 88,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 201,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#destroy",
    "access": "public",
    "description": "Destroys provider.",
    "lineNumber": 95,
    "params": [],
    "return": null
  },
  {
    "__docId__": 202,
    "kind": "method",
    "name": "initService",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initService",
    "access": "public",
    "description": "Initializes the service APIs.",
    "lineNumber": 103,
    "params": [],
    "return": null
  },
  {
    "__docId__": 203,
    "kind": "method",
    "name": "initExtensions",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initExtensions",
    "access": "public",
    "description": "Initializes Express extensions.",
    "lineNumber": 164,
    "params": [],
    "return": null
  },
  {
    "__docId__": 204,
    "kind": "method",
    "name": "initResourceRoutes",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initResourceRoutes",
    "access": "public",
    "description": "Initializes Express base routes, etc.",
    "lineNumber": 201,
    "params": [],
    "return": null
  },
  {
    "__docId__": 205,
    "kind": "method",
    "name": "initSocketRoutes",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initSocketRoutes",
    "access": "public",
    "description": "Initializes Socket routes.",
    "lineNumber": 225,
    "params": [],
    "return": null
  },
  {
    "__docId__": 206,
    "kind": "method",
    "name": "initProxies",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initProxies",
    "access": "public",
    "description": "Initializes Express proxies.",
    "lineNumber": 286,
    "params": [],
    "return": null
  },
  {
    "__docId__": 207,
    "kind": "method",
    "name": "initDeveloperTools",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initDeveloperTools",
    "access": "public",
    "description": "Initializes some developer features.",
    "lineNumber": 306,
    "params": [],
    "return": null
  },
  {
    "__docId__": 208,
    "kind": "file",
    "name": "src/providers/packages.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\nconst chokidar = require(\"chokidar\");\nconst { ServiceProvider } = require(\"@meeseOS/common\");\nconst Packages = require(\"../packages\");\nconst { closeWatches } = require(\"../utils/core\");\n\n/**\n * MeeseOS Package Service Provider\n */\nclass PackageServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t */\n\tconstructor(core) {\n\t\tsuper(core);\n\n\t\tconst { configuration } = this.core;\n\t\tconst manifestFile = path.join(\n\t\t\tconfiguration.public,\n\t\t\tconfiguration.packages.metadata\n\t\t);\n\t\tconst discoveredFile = path.resolve(\n\t\t\tconfiguration.root,\n\t\t\tconfiguration.packages.discovery\n\t\t);\n\n\t\tthis.watches = [];\n\t\tthis.packages = new Packages(core, {\n\t\t\tmanifestFile,\n\t\t\tdiscoveredFile,\n\t\t});\n\t}\n\n\tstatic provides() {\n\t\treturn [\"meeseOS/packages\"];\n\t}\n\n\tinit() {\n\t\tthis.core.singleton(\"meeseOS/packages\", () => this.packages);\n\n\t\treturn this.packages.init();\n\t}\n\n\tstart() {\n\t\tthis.packages.start();\n\n\t\tif (this.core.configuration.development) {\n\t\t\tthis.initDeveloperTools();\n\t\t}\n\t}\n\n\tasync destroy() {\n\t\tawait closeWatches(this.watches);\n\t\tawait this.packages.destroy();\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Initializes some developer features.\n\t */\n\tinitDeveloperTools() {\n\t\tconst { manifestFile } = this.packages.options;\n\n\t\tif (fs.existsSync(manifestFile)) {\n\t\t\tconst watcher = chokidar.watch(manifestFile);\n\t\t\twatcher.on(\"change\", () => {\n\t\t\t\tthis.core.broadcast(\"meeseOS/packages:metadata:changed\");\n\t\t\t});\n\n\t\t\tthis.watches.push(watcher);\n\t\t}\n\t}\n}\n\nmodule.exports = PackageServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/packages.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 209,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/packages.js",
    "static": true,
    "longname": "src/providers/packages.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 210,
    "kind": "variable",
    "name": "closeWatches",
    "memberof": "src/providers/packages.js",
    "static": true,
    "longname": "src/providers/packages.js~closeWatches",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 211,
    "kind": "class",
    "name": "PackageServiceProvider",
    "memberof": "src/providers/packages.js",
    "static": true,
    "longname": "src/providers/packages.js~PackageServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/providers/packages.js",
    "importStyle": "PackageServiceProvider",
    "description": "MeeseOS Package Service Provider",
    "lineNumber": 43,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 212,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 48,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ]
  },
  {
    "__docId__": 213,
    "kind": "member",
    "name": "watches",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#watches",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 214,
    "kind": "member",
    "name": "packages",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#packages",
    "access": "public",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 215,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/packages.js~PackageServiceProvider.provides",
    "access": "public",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 216,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#init",
    "access": "public",
    "description": null,
    "lineNumber": 72,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 217,
    "kind": "method",
    "name": "start",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#start",
    "access": "public",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 218,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 219,
    "kind": "method",
    "name": "initDeveloperTools",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#initDeveloperTools",
    "access": "public",
    "description": "Initializes some developer features.",
    "lineNumber": 95,
    "params": [],
    "return": null
  },
  {
    "__docId__": 220,
    "kind": "file",
    "name": "src/providers/settings.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst Settings = require(\"../settings\");\nconst { ServiceProvider } = require(\"@meeseOS/common\");\n\n/**\n * MeeseOS Settings Service Provider\n */\nclass SettingsServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options] Arguments\n\t */\n\tconstructor(core, options) {\n\t\tsuper(core, options);\n\n\t\tthis.settings = new Settings(core, options);\n\t}\n\n\tdestroy() {\n\t\tthis.settings.destroy();\n\t\tsuper.destroy();\n\t}\n\n\tinit() {\n\t\tthis.core\n\t\t\t.make(\"meeseOS/express\")\n\t\t\t.routeAuthenticated(\"post\", \"/settings\", (req, res) =>\n\t\t\t\tthis.settings.save(req, res)\n\t\t\t);\n\n\t\tthis.core\n\t\t\t.make(\"meeseOS/express\")\n\t\t\t.routeAuthenticated(\"get\", \"/settings\", (req, res) =>\n\t\t\t\tthis.settings.load(req, res)\n\t\t\t);\n\n\t\treturn this.settings.init();\n\t}\n}\n\nmodule.exports = SettingsServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/settings.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 221,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/settings.js",
    "static": true,
    "longname": "src/providers/settings.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/settings.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 222,
    "kind": "class",
    "name": "SettingsServiceProvider",
    "memberof": "src/providers/settings.js",
    "static": true,
    "longname": "src/providers/settings.js~SettingsServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/providers/settings.js",
    "importStyle": "SettingsServiceProvider",
    "description": "MeeseOS Settings Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 223,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 44,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 224,
    "kind": "member",
    "name": "settings",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#settings",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 225,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 226,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#init",
    "access": "public",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 227,
    "kind": "file",
    "name": "src/providers/token-factory.js",
    "content": "/**\n * MeeseOS - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2022-Present, Aaron Meese <aaron@meese.dev>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Aaron Meese <aaron@meese.dev>\n * @licence Simplified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meeseOS/common\");\nconst TokenFactory = require(\"../utils/token-factory\");\n\n/**\n * MeeseOS Token Factory Service Provider\n */\nclass TokenFactoryServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t */\n\tconstructor(core) {\n\t\tsuper(core);\n\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {TokenFactory}\n\t\t */\n\t\tthis.tokenFactory = new TokenFactory(this.core);\n\t}\n\n\t/**\n\t * A list of services this provider depends on.\n\t * @returns {String[]}\n\t */\n\tdepends() {\n\t\treturn [\"meeseOS/token-storage\"];\n\t}\n\n\t/**\n\t * Get a list of services this provider registers.\n\t * @returns {String[]}\n\t */\n\tprovides() {\n\t\treturn [\"meeseOS/token-factory\"];\n\t}\n\n\t/**\n\t * Initializes provider.\n\t */\n\tasync init() {\n\t\tawait this.tokenFactory.init();\n\n\t\tthis.core.singleton(\"meeseOS/token-factory\", () => this.tokenFactory);\n\t}\n\n\tdestroy() {\n\t\tsuper.destroy();\n\t}\n}\n\nmodule.exports = TokenFactoryServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/token-factory.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 228,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/token-factory.js",
    "static": true,
    "longname": "src/providers/token-factory.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/token-factory.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 229,
    "kind": "class",
    "name": "TokenFactoryServiceProvider",
    "memberof": "src/providers/token-factory.js",
    "static": true,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/providers/token-factory.js",
    "importStyle": "TokenFactoryServiceProvider",
    "description": "MeeseOS Token Factory Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 230,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 43,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ]
  },
  {
    "__docId__": 231,
    "kind": "member",
    "name": "core",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#core",
    "access": "public",
    "description": "",
    "lineNumber": 49,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 232,
    "kind": "member",
    "name": "tokenFactory",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#tokenFactory",
    "access": "public",
    "description": "",
    "lineNumber": 54,
    "type": {
      "nullable": null,
      "types": [
        "TokenFactory"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 233,
    "kind": "method",
    "name": "depends",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#depends",
    "access": "public",
    "description": "A list of services this provider depends on.",
    "lineNumber": 61,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 234,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#provides",
    "access": "public",
    "description": "Get a list of services this provider registers.",
    "lineNumber": 69,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 235,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#init",
    "access": "public",
    "description": "Initializes provider.",
    "lineNumber": 76,
    "params": [],
    "return": null
  },
  {
    "__docId__": 236,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 82,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 237,
    "kind": "file",
    "name": "src/providers/token-storage.js",
    "content": "/**\n * MeeseOS - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2022-Present, Aaron Meese <aaron@meese.dev>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Aaron Meese <aaron@meese.dev>\n * @licence Simplified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meeseOS/common\");\nconst TokenStorage = require(\"../utils/token-storage\");\n\n/**\n * MeeseOS Token Storage Service Provider\n */\nclass TokenStorageServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options={}] Arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tsuper(core, options);\n\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\t\tthis.options = options;\n\n\t\t/**\n\t\t * @type {TokenStorage}\n\t\t */\n\t\tthis.storage = new TokenStorage(this.core, this.options);\n\t}\n\n\t/**\n\t * Get a list of services this provider registers.\n\t * @returns {String[]}\n\t */\n\tprovides() {\n\t\treturn [\"meeseOS/token-storage\"];\n\t}\n\n\t/**\n\t * Initializes provider.\n\t */\n\tasync init() {\n\t\tawait this.storage.init();\n\n\t\tthis.core.singleton(\"meeseOS/token-storage\", () => this.storage);\n\t}\n\n\t/**\n\t * Destroys provider.\n\t */\n\tdestroy() {\n\t\tthis.storage.destroy();\n\t}\n}\n\nmodule.exports = TokenStorageServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/token-storage.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 238,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/token-storage.js",
    "static": true,
    "longname": "src/providers/token-storage.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/token-storage.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 239,
    "kind": "class",
    "name": "TokenStorageServiceProvider",
    "memberof": "src/providers/token-storage.js",
    "static": true,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/providers/token-storage.js",
    "importStyle": "TokenStorageServiceProvider",
    "description": "MeeseOS Token Storage Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 240,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 44,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 241,
    "kind": "member",
    "name": "core",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#core",
    "access": "public",
    "description": "",
    "lineNumber": 50,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 242,
    "kind": "member",
    "name": "options",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#options",
    "access": "public",
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 243,
    "kind": "member",
    "name": "storage",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#storage",
    "access": "public",
    "description": "",
    "lineNumber": 56,
    "type": {
      "nullable": null,
      "types": [
        "TokenStorage"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 244,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#provides",
    "access": "public",
    "description": "Get a list of services this provider registers.",
    "lineNumber": 63,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 245,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#init",
    "access": "public",
    "description": "Initializes provider.",
    "lineNumber": 70,
    "params": [],
    "return": null
  },
  {
    "__docId__": 246,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#destroy",
    "access": "public",
    "description": "Destroys provider.",
    "lineNumber": 79,
    "params": [],
    "return": null
  },
  {
    "__docId__": 247,
    "kind": "file",
    "name": "src/providers/vfs.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meeseOS/common\");\nconst Filesystem = require(\"../filesystem\");\n\n/**\n * MeeseOS Virtual Filesystem Service Provider\n */\nclass VFSServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options={}] Arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tsuper(core, options);\n\n\t\tthis.filesystem = new Filesystem(core, options);\n\t}\n\n\tasync destroy() {\n\t\tawait this.filesystem.destroy();\n\t\tsuper.destroy();\n\t}\n\n\tstatic depends() {\n\t\treturn [\"meeseOS/express\"];\n\t}\n\n\tstatic provides() {\n\t\treturn [\"meeseOS/fs\", \"meeseOS/vfs\"];\n\t}\n\n\tasync init() {\n\t\tconst filesystem = this.filesystem;\n\n\t\tawait filesystem.init();\n\n\t\tthis.core.singleton(\"meeseOS/fs\", () => this.filesystem);\n\n\t\tthis.core.singleton(\"meeseOS/vfs\", () => ({\n\t\t\trealpath: (...args) => this.filesystem.realpath(...args),\n\t\t\trequest: (...args) => this.filesystem.request(...args),\n\t\t\tcall: (...args) => this.filesystem.call(...args),\n\t\t\tmime: (...args) => this.filesystem.mime(...args),\n\n\t\t\tget adapters() {\n\t\t\t\treturn filesystem.adapters;\n\t\t\t},\n\n\t\t\tget mountpoints() {\n\t\t\t\treturn filesystem.mountpoints;\n\t\t\t},\n\t\t}));\n\n\t\tthis.core.app.use(\"/vfs\", filesystem.router);\n\t}\n}\n\nmodule.exports = VFSServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/vfs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 248,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/vfs.js",
    "static": true,
    "longname": "src/providers/vfs.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/providers/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 249,
    "kind": "class",
    "name": "VFSServiceProvider",
    "memberof": "src/providers/vfs.js",
    "static": true,
    "longname": "src/providers/vfs.js~VFSServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/providers/vfs.js",
    "importStyle": "VFSServiceProvider",
    "description": "MeeseOS Virtual Filesystem Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 250,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 44,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 251,
    "kind": "member",
    "name": "filesystem",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#filesystem",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 252,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 253,
    "kind": "method",
    "name": "depends",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/vfs.js~VFSServiceProvider.depends",
    "access": "public",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 254,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/vfs.js~VFSServiceProvider.provides",
    "access": "public",
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 255,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#init",
    "access": "public",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 256,
    "kind": "file",
    "name": "src/settings.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst nullAdapter = require(\"./adapters/settings/null\");\nconst fsAdapter = require(\"./adapters/settings/fs\");\n\n/**\n * TODO: typedef\n * @typedef {Object} SettingsAdapter\n */\n\n/**\n * Settings Service Options\n * @typedef {Object} SettingsOptions\n * @property {SettingsAdapter|string} [adapter]\n */\n\n/**\n * MeeseOS Settings Manager\n */\nclass Settings {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {SettingsOptions} [options={}] Instance options\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\tthis.options = {\n\t\t\tadapter: nullAdapter,\n\t\t\t...options,\n\t\t};\n\n\t\tif (this.options.adapter === \"fs\") {\n\t\t\tthis.options.adapter = fsAdapter;\n\t\t}\n\n\t\tthis.adapter = nullAdapter(core, this.options.config);\n\n\t\ttry {\n\t\t\tthis.adapter = this.options.adapter(core, this.options.config);\n\t\t} catch (e) {\n\t\t\tthis.core.logger.warn(e);\n\t\t}\n\t}\n\n\t/**\n\t * Destroy instance.\n\t */\n\tdestroy() {\n\t\tif (this.adapter.destroy) {\n\t\t\tthis.adapter.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * Initializes adapter.\n\t * @returns {Promise<Boolean>}\n\t */\n\tinit() {\n\t\tif (this.adapter.init) {\n\t\t\treturn this.adapter.init();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Sends save request to adapter.\n\t * @param {Request} req Express request\n\t * @param {Response} res Express response\n\t * @returns {Promise<undefined>}\n\t */\n\tasync save(req, res) {\n\t\tconst result = await this.adapter.save(req, res);\n\t\tres.json(result);\n\t}\n\n\t/**\n\t * Sends load request to adapter.\n\t * @param {Request} req Express request\n\t * @param {Response} res Express response\n\t * @returns {Promise<undefined>}\n\t */\n\tasync load(req, res) {\n\t\tconst result = await this.adapter.load(req, res);\n\t\tres.json(result);\n\t}\n}\n\nmodule.exports = Settings;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/settings.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 257,
    "kind": "typedef",
    "name": "SettingsAdapter",
    "memberof": "src/settings.js",
    "static": true,
    "longname": "src/settings.js~SettingsAdapter",
    "access": "public",
    "description": "TODO: typedef",
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "SettingsAdapter"
    }
  },
  {
    "__docId__": 258,
    "kind": "typedef",
    "name": "SettingsOptions",
    "memberof": "src/settings.js",
    "static": true,
    "longname": "src/settings.js~SettingsOptions",
    "access": "public",
    "description": "Settings Service Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "SettingsAdapter",
          "string"
        ],
        "spread": false,
        "optional": true,
        "name": "adapter",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "SettingsOptions"
    }
  },
  {
    "__docId__": 259,
    "kind": "class",
    "name": "Settings",
    "memberof": "src/settings.js",
    "static": true,
    "longname": "src/settings.js~Settings",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/settings.js",
    "importStyle": "Settings",
    "description": "MeeseOS Settings Manager",
    "lineNumber": 48,
    "interface": false
  },
  {
    "__docId__": 260,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/settings.js~Settings#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 54,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "SettingsOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Instance options"
      }
    ]
  },
  {
    "__docId__": 261,
    "kind": "member",
    "name": "core",
    "memberof": "src/settings.js~Settings",
    "static": false,
    "longname": "src/settings.js~Settings#core",
    "access": "public",
    "description": "",
    "lineNumber": 58,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 262,
    "kind": "member",
    "name": "options",
    "memberof": "src/settings.js~Settings",
    "static": false,
    "longname": "src/settings.js~Settings#options",
    "access": "public",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "{\"adapter\": *, ...options: Object}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 263,
    "kind": "member",
    "name": "adapter",
    "memberof": "src/settings.js~Settings",
    "static": false,
    "longname": "src/settings.js~Settings#adapter",
    "access": "public",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 265,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/settings.js~Settings#destroy",
    "access": "public",
    "description": "Destroy instance.",
    "lineNumber": 81,
    "params": [],
    "return": null
  },
  {
    "__docId__": 266,
    "kind": "method",
    "name": "init",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/settings.js~Settings#init",
    "access": "public",
    "description": "Initializes adapter.",
    "lineNumber": 91,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 267,
    "kind": "method",
    "name": "save",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/settings.js~Settings#save",
    "access": "public",
    "description": "Sends save request to adapter.",
    "lineNumber": 105,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "Express request"
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "Express response"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 268,
    "kind": "method",
    "name": "load",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/settings.js~Settings#load",
    "access": "public",
    "description": "Sends load request to adapter.",
    "lineNumber": 116,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "Express request"
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "Express response"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 269,
    "kind": "file",
    "name": "src/utils/token-factory.js",
    "content": "const jwt = require(\"jsonwebtoken\");\n\n/**\n * Token Factory Options\n * @typedef {Object} TokenFactoryOptions\n * @property {String} [accessTokenSecret]\n * @property {String} [refreshTokenSecret]\n * @property {String} [accessTokenDuration]\n */\n\n/**\n * JWT Token Factory\n */\nclass TokenFactory {\n\t/**\n\t * Creates a new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {TokenFactoryOptions} [options={}] Token Factory arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tconst {\n\t\t\taccessTokenSecret,\n\t\t\trefreshTokenSecret,\n\t\t\taccessTokenDuration\n\t\t} = core.configuration.session.jwt;\n\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {TokenFactoryOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\taccessTokenSecret,\n\t\t\trefreshTokenSecret,\n\t\t\taccessTokenDuration,\n\t\t\t...options,\n\t\t};\n\t}\n\n\t/**\n\t * Initializes adapter.\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync init() {\n\t\t/**\n\t\t * @type {TokenStorage}\n\t\t */\n\t\tthis.storage = this.core.make(\"meeseOS/token-storage\");\n\n\t\tawait this.storage.init();\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Creates an access token for a user.\n\t * @param {String} username The user's username\n\t * @param {Array} groups The user's groups\n\t * @returns {String} The access token\n\t */\n\tcreateAccessToken(username, groups) {\n\t\treturn jwt.sign(\n\t\t\t{ username, groups: JSON.stringify(groups) },\n\t\t\tthis.options.accessTokenSecret,\n\t\t\t{ expiresIn: this.options.accessTokenDuration }\n\t\t);\n\t}\n\n\t/**\n\t * Validates an access token.\n\t * @param {String} accessToken The access token to validate\n\t * @returns {Promise<Boolean|Object>} The user if valid, otherwise `false`\n\t */\n\tvalidateAccessToken(accessToken) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tjwt.verify(accessToken, this.options.accessTokenSecret, (err, user) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(user);\n\t\t\t\t}\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\t// this.core.logger.warn(\"Access token validation error:\", error);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t/**\n\t * Creates a refresh token for a user.\n\t * @param {String} username The user's username\n\t * @param {Array} groups The user's groups\n\t * @returns {String} The refresh token\n\t */\n\tcreateRefreshToken(username, groups) {\n\t\treturn jwt.sign(\n\t\t\t{ username, groups: JSON.stringify(groups) },\n\t\t\tthis.options.refreshTokenSecret\n\t\t);\n\t}\n\n\t/**\n\t * Validates a refresh token.\n\t * @param {String} refreshToken The refresh token to validate\n\t * @returns {Promise<Boolean|Object>} The user if valid, otherwise `false`\n\t */\n\tvalidateRefreshToken(refreshToken) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tjwt.verify(refreshToken, this.options.refreshTokenSecret, (err, user) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(user);\n\t\t\t\t}\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\t// this.core.logger.warn(\"Refresh token validation error:\", error);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t/**\n\t * Uses a refresh token to create a new access token, then returns the\n\t * associated user profile along with the new access token.\n\t * @param {String} refreshToken Refresh token\n\t * @returns {Promise<*>}\n\t */\n\trefreshToAccessToken(refreshToken) {\n\t\t// Need to ensure that the refreshToken hasn't been revoked\n\t\tif (!refreshToken || !this.storage.find(refreshToken)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tconst tokenInStorage = this.storage.find(refreshToken);\n\t\t\tif (!tokenInStorage) {\n\t\t\t\treturn reject(new Error(\"Token not found\"));\n\t\t\t}\n\n\t\t\tconst user = await this.validateRefreshToken(refreshToken);\n\t\t\tif (!user) {\n\t\t\t\tthis.storage.remove(refreshToken);\n\t\t\t\treturn reject(new Error(\"Token not valid\"));\n\t\t\t}\n\n\t\t\tconst accessToken = this.createAccessToken(\n\t\t\t\tuser.username,\n\t\t\t\tuser.groups\n\t\t\t);\n\n\t\t\tresolve({ ...user, accessToken });\n\t\t}).catch((error) => {\n\t\t\tthis.core.logger.error(error);\n\t\t\treturn false;\n\t\t});\n\t}\n}\n\nmodule.exports = TokenFactory;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/utils/token-factory.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 270,
    "kind": "typedef",
    "name": "TokenFactoryOptions",
    "memberof": "src/utils/token-factory.js",
    "static": true,
    "longname": "src/utils/token-factory.js~TokenFactoryOptions",
    "access": "public",
    "description": "Token Factory Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "accessTokenSecret",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "refreshTokenSecret",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "accessTokenDuration",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "TokenFactoryOptions"
    }
  },
  {
    "__docId__": 271,
    "kind": "class",
    "name": "TokenFactory",
    "memberof": "src/utils/token-factory.js",
    "static": true,
    "longname": "src/utils/token-factory.js~TokenFactory",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/token-factory.js",
    "importStyle": "TokenFactory",
    "description": "JWT Token Factory",
    "lineNumber": 14,
    "interface": false
  },
  {
    "__docId__": 272,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#constructor",
    "access": "public",
    "description": "Creates a new instance.",
    "lineNumber": 20,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "TokenFactoryOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Token Factory arguments"
      }
    ]
  },
  {
    "__docId__": 273,
    "kind": "member",
    "name": "core",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#core",
    "access": "public",
    "description": "",
    "lineNumber": 30,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 274,
    "kind": "member",
    "name": "options",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#options",
    "access": "public",
    "description": "",
    "lineNumber": 35,
    "type": {
      "nullable": null,
      "types": [
        "TokenFactoryOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 275,
    "kind": "method",
    "name": "init",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#init",
    "access": "public",
    "description": "Initializes adapter.",
    "lineNumber": 47,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 276,
    "kind": "member",
    "name": "storage",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#storage",
    "access": "public",
    "description": "",
    "lineNumber": 51,
    "type": {
      "nullable": null,
      "types": [
        "TokenStorage"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 277,
    "kind": "method",
    "name": "createAccessToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#createAccessToken",
    "access": "public",
    "description": "Creates an access token for a user.",
    "lineNumber": 64,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} The access token"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "username",
        "description": "The user's username"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": "The user's groups"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "The access token"
    }
  },
  {
    "__docId__": 278,
    "kind": "method",
    "name": "validateAccessToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#validateAccessToken",
    "access": "public",
    "description": "Validates an access token.",
    "lineNumber": 77,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean|Object>} The user if valid, otherwise `false`"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "accessToken",
        "description": "The access token to validate"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean|Object>"
      ],
      "spread": false,
      "description": "The user if valid, otherwise `false`"
    }
  },
  {
    "__docId__": 279,
    "kind": "method",
    "name": "createRefreshToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#createRefreshToken",
    "access": "public",
    "description": "Creates a refresh token for a user.",
    "lineNumber": 98,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} The refresh token"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "username",
        "description": "The user's username"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": "The user's groups"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "The refresh token"
    }
  },
  {
    "__docId__": 280,
    "kind": "method",
    "name": "validateRefreshToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#validateRefreshToken",
    "access": "public",
    "description": "Validates a refresh token.",
    "lineNumber": 110,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean|Object>} The user if valid, otherwise `false`"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to validate"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean|Object>"
      ],
      "spread": false,
      "description": "The user if valid, otherwise `false`"
    }
  },
  {
    "__docId__": 281,
    "kind": "method",
    "name": "refreshToAccessToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#refreshToAccessToken",
    "access": "public",
    "description": "Uses a refresh token to create a new access token, then returns the\nassociated user profile along with the new access token.",
    "lineNumber": 131,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<*>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "Refresh token"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<*>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 282,
    "kind": "file",
    "name": "src/utils/token-storage.js",
    "content": "/**\n * MeeseOS - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2022-Present, Aaron Meese <aaron@meese.dev>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Aaron Meese <aaron@meese.dev>\n * @licence Simplified BSD License\n */\n\nconst loki = require(\"lokijs\");\n\n/**\n * Token Storage Options\n * @typedef {Object} TokenStorageOptions\n * @property {String} [databaseName]\n * @property {String} [collectionName]\n * @property {Object} [databaseOptions]\n */\n\n/**\n * Token Storage\n */\nclass TokenStorage {\n\t/**\n\t * Creates a new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {TokenStorageOptions} [options={}] Token Storage arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {TokenStorageOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\t...this.core.configuration.session.store,\n\t\t\t...options,\n\t\t};\n\t}\n\n\t/**\n\t * Initializes the instance.\n\t */\n\tinit() {\n\t\tthis.db = new loki(\n\t\t\tthis.options.databaseName,\n\t\t\t{\n\t\t\t\tautoloadCallback: () => {\n\t\t\t\t\t// Returns the collection if it exists, otherwise creates it\n\t\t\t\t\tlet collection = this.db.getCollection(this.options.collectionName);\n\t\t\t\t\tif (!collection) {\n\t\t\t\t\t\tcollection = this.db.addCollection(this.options.collectionName);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.collection = collection;\n\t\t\t\t},\n\t\t\t\t...this.options.databaseOptions,\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * Looks for a refresh token in the database and returns it if found.\n\t * @param {String} refreshToken The refresh token to look for\n\t * @returns {Object|null} The token if found or `null` if not\n\t */\n\tfind(refreshToken) {\n\t\treturn this.collection.findOne({ refreshToken });\n\t}\n\n\t/**\n\t * Adds a refresh token to the database.\n\t * @param {String} refreshToken The refresh token to add\n\t */\n\tcreate(refreshToken) {\n\t\t// The timestamp is used to make pruning old data easier\n\t\tconst timestamp = new Date().getTime();\n\t\tthis.collection.insert({ refreshToken, timestamp });\n\t}\n\n\t/**\n\t * Removes a refresh token from the database.\n\t * @param {String} refreshToken The refresh token to remove\n\t * @returns {Promise<Boolean>} `true` if the token was removed, otherwise `false`\n\t */\n\tremove(refreshToken) {\n\t\tconst row = this.collection.findOne({ refreshToken });\n\t\tif (row) {\n\t\t\tthis.collection.remove(row);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Destroys the instance.\n\t */\n\tdestroy() {\n\t\tthis.db.close();\n\t}\n}\n\nmodule.exports = TokenStorage;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/utils/token-storage.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 283,
    "kind": "typedef",
    "name": "TokenStorageOptions",
    "memberof": "src/utils/token-storage.js",
    "static": true,
    "longname": "src/utils/token-storage.js~TokenStorageOptions",
    "access": "public",
    "description": "Token Storage Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "databaseName",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "collectionName",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "databaseOptions",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "TokenStorageOptions"
    }
  },
  {
    "__docId__": 284,
    "kind": "class",
    "name": "TokenStorage",
    "memberof": "src/utils/token-storage.js",
    "static": true,
    "longname": "src/utils/token-storage.js~TokenStorage",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/token-storage.js",
    "importStyle": "TokenStorage",
    "description": "Token Storage",
    "lineNumber": 44,
    "interface": false
  },
  {
    "__docId__": 285,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#constructor",
    "access": "public",
    "description": "Creates a new instance.",
    "lineNumber": 50,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "TokenStorageOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Token Storage arguments"
      }
    ]
  },
  {
    "__docId__": 286,
    "kind": "member",
    "name": "core",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#core",
    "access": "public",
    "description": "",
    "lineNumber": 54,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 287,
    "kind": "member",
    "name": "options",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#options",
    "access": "public",
    "description": "",
    "lineNumber": 59,
    "type": {
      "nullable": null,
      "types": [
        "TokenStorageOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 288,
    "kind": "method",
    "name": "init",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#init",
    "access": "public",
    "description": "Initializes the instance.",
    "lineNumber": 68,
    "params": [],
    "return": null
  },
  {
    "__docId__": 289,
    "kind": "member",
    "name": "db",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#db",
    "access": "public",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 290,
    "kind": "member",
    "name": "collection",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#collection",
    "access": "public",
    "description": null,
    "lineNumber": 79,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 291,
    "kind": "method",
    "name": "find",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#find",
    "access": "public",
    "description": "Looks for a refresh token in the database and returns it if found.",
    "lineNumber": 91,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object|null} The token if found or `null` if not"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to look for"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object",
        "null"
      ],
      "spread": false,
      "description": "The token if found or `null` if not"
    }
  },
  {
    "__docId__": 292,
    "kind": "method",
    "name": "create",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#create",
    "access": "public",
    "description": "Adds a refresh token to the database.",
    "lineNumber": 99,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to add"
      }
    ],
    "return": null
  },
  {
    "__docId__": 293,
    "kind": "method",
    "name": "remove",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#remove",
    "access": "public",
    "description": "Removes a refresh token from the database.",
    "lineNumber": 110,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>} `true` if the token was removed, otherwise `false`"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to remove"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": "`true` if the token was removed, otherwise `false`"
    }
  },
  {
    "__docId__": 294,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#destroy",
    "access": "public",
    "description": "Destroys the instance.",
    "lineNumber": 123,
    "params": [],
    "return": null
  },
  {
    "__docId__": 295,
    "kind": "file",
    "name": "src/utils/vfs.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst url = require(\"url\");\nconst sanitizeFilename = require(\"sanitize-filename\");\nconst formidable = require(\"formidable\");\nconst { Stream } = require(\"stream\");\n\n/**\n * A map of error codes.\n */\nconst errorCodes = {\n\tENOENT: 404,\n\tEACCES: 401,\n};\n\n/**\n * Gets prefix of a VFS path.\n * @param {String} path\n * @returns {String}\n */\nconst getPrefix = (path) => String(path).split(\":\")[0];\n\n/**\n * Sanitizes a path.\n * @param {String} path\n * @returns {String}\n */\nconst sanitize = (path) => {\n\tconst [name, str] = (\n\t\tpath.replace(/\\/+/g, \"/\").match(/^([\\w-_]+):+(.*)/) || []\n\t).slice(1);\n\n\tconst sane = str\n\t\t.split(\"/\")\n\t\t.map((s) => sanitizeFilename(s))\n\t\t.join(\"/\")\n\t\t.replace(/\\/+/g, \"/\");\n\n\treturn name + \":\" + sane;\n};\n\n/**\n * Gets the stream from an HTTP request.\n * @param {Request} req\n */\nconst streamFromRequest = (req) => {\n\tconst isStream = req.files.upload instanceof Stream;\n\treturn isStream\n\t\t? req.files.upload\n\t\t: fs.createReadStream(req.files.upload.filepath);\n};\n\n/**\n * @param {Array} arr\n * @param {Array} compare\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateAll = (arr, compare, strict = true) =>\n\tarr[strict ? \"every\" : \"some\"]((g) => compare.indexOf(g) !== -1);\n\n/**\n * Validates array groups.\n *\n * @param {Array} groups\n * @param {Array} userGroups\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateNamedGroups = (groups, userGroups, strict) => {\n\tconst namedGroups = groups.filter((g) => typeof g === \"string\");\n\n\treturn namedGroups.length\n\t\t? validateAll(namedGroups, userGroups, strict)\n\t\t: true;\n};\n\n/**\n * Validates map of groups based on method:[group,...]\n *\n * @param {Array} groups\n * @param {Array} userGroups\n * @param {String} method\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateMethodGroups = (groups, userGroups, method, strict) => {\n\tconst methodGroups = groups.find((g) =>\n\t\ttypeof g === \"string\" ? false : method in g\n\t);\n\n\treturn methodGroups\n\t\t? validateAll(methodGroups[method], userGroups, strict)\n\t\t: true;\n};\n\n/**\n * Validates groups.\n *\n * @param {Array} userGroups\n * @param {String} method\n * @param {Object} mountpoint\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateGroups = (userGroups, method, mountpoint, strict) => {\n\tconst groups = mountpoint.attributes.groups || [];\n\tif (groups.length) {\n\t\tconst namedValid = validateNamedGroups(groups, userGroups, strict);\n\t\tconst methodValid = validateMethodGroups(\n\t\t\tgroups,\n\t\t\tuserGroups,\n\t\t\tmethod,\n\t\t\tstrict\n\t\t);\n\n\t\treturn namedValid && methodValid;\n\t}\n\n\treturn true;\n};\n\n/**\n * Checks permissions for given mountpoint.\n *\n * @param {Request} req\n * @param {Response} res\n * @param {String} method\n * @param {Boolean} readOnly\n * @param {Boolean} strict\n */\nconst checkMountpointPermission = (req, res, method, readOnly, strict) => {\n\tconst userGroups = req.session.user.groups;\n\n\treturn ({ mount }) => {\n\t\tif (readOnly) {\n\t\t\tconst { attributes, name } = mount;\n\n\t\t\tif (attributes.readOnly) {\n\t\t\t\tconst failed = typeof readOnly === \"function\"\n\t\t\t\t\t? getPrefix(readOnly(req, res)) === name\n\t\t\t\t\t: readOnly;\n\n\t\t\t\tif (failed) {\n\t\t\t\t\treturn Promise.reject(\n\t\t\t\t\t\tcreateError(403, `Mountpoint '${name}' is read-only`)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (validateGroups(userGroups, method, mount, strict)) {\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\treturn Promise.reject(\n\t\t\tcreateError(\n\t\t\t\t403,\n\t\t\t\t`Permission was denied for '${method}' in '${mount.name}'`\n\t\t\t)\n\t\t);\n\t};\n};\n\n/**\n * Creates a new custom Error.\n * @param {Number} code\n * @param {String} message\n * @return {Error}\n */\nconst createError = (code, message) => {\n\tconst error = new Error(message);\n\terror.code = code;\n\treturn error;\n};\n\n/**\n * Resolves a mountpoint.\n * @param {Core} core MeeseOS Core instance reference\n * @returns {Object}\n */\nconst mountpointResolver = (core) =>\n\tasync (path) => {\n\t\tconst { adapters, mountpoints } = core.make(\"meeseOS/vfs\");\n\t\tconst prefix = getPrefix(path);\n\t\tconst mount = mountpoints.find((m) => m.name === prefix);\n\n\t\tif (!mount) {\n\t\t\tthrow createError(403, `Mountpoint not found for '${prefix}'`);\n\t\t}\n\n\t\tconst adapter = await (mount.adapter\n\t\t\t? adapters[mount.adapter]\n\t\t\t: adapters.system);\n\n\t\treturn Object.freeze({ mount, adapter });\n\t};\n\n/**\n * Parses URL body.\n * @param {Request} req\n * @returns {Promise<Object>}\n */\nconst parseGet = (req) => {\n\t// skipcq: JS-0272\n\tconst { query } = url.parse(req.url, true);\n\n\treturn Promise.resolve({ fields: query, files: {} });\n};\n\n/**\n * Parses JSON body.\n * @param {Request} req\n * @returns {Object|Boolean}\n */\nconst parseJson = (req) => {\n\tconst isJson = req.headers[\"content-type\"] &&\n\t\treq.headers[\"content-type\"].indexOf(\"application/json\") !== -1;\n\n\tif (isJson) {\n\t\treturn { fields: req.body, files: {} };\n\t}\n\n\treturn false;\n};\n\n/**\n * Parses form body.\n *\n * @param {Request} req\n * @param {Number} config.maxFieldsSize\n * @param {Number} config.maxFileSize\n * @returns {Promise<any>}\n */\nconst parseFormData = (req, { maxFieldsSize, maxFileSize }) => {\n\tconst form = formidable({\n\t\tmultiples: true,\n\t\tmaxFieldsSize,\n\t\tmaxFileSize,\n\t});\n\n\treturn new Promise((resolve, reject) => {\n\t\tform.parse(req, (err, fields, files) => {\n\t\t\treturn err ? reject(err) : resolve({ fields, files });\n\t\t});\n\t});\n};\n\n/**\n * Middleware for handling HTTP requests.\n * @param {Object} config\n * @returns {Promise<any>}\n */\nconst parseFields = (config) =>\n\t(req, res) => {\n\t\tif ([\"get\", \"head\"].indexOf(req.method.toLowerCase()) !== -1) {\n\t\t\treturn Promise.resolve(parseGet(req));\n\t\t}\n\n\t\tconst json = parseJson(req);\n\t\tif (json) return Promise.resolve(json);\n\n\t\treturn parseFormData(req, config);\n\t};\n\n/**\n * A map of methods and their arguments.\n * Used for direct access via API.\n */\nconst methodArguments = {\n\trealpath: [\"path\"],\n\texists: [\"path\"],\n\tstat: [\"path\"],\n\treaddir: [\"path\"],\n\treadfile: [\"path\"],\n\twritefile: [\"path\", (upload) => ({ upload })],\n\tmkdir: [\"path\"],\n\tunlink: [\"path\"],\n\ttouch: [\"path\"],\n\tsearch: [\"root\", \"pattern\"],\n\tcopy: [\"from\", \"to\"],\n\trename: [\"from\", \"to\"],\n\tarchive: [\"selection\"],\n};\n\nmodule.exports = {\n\tmountpointResolver,\n\tcreateError,\n\tcheckMountpointPermission,\n\tvalidateGroups,\n\tstreamFromRequest,\n\tsanitize,\n\tgetPrefix,\n\tparseFields,\n\terrorCodes,\n\tmethodArguments,\n};\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/utils/vfs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 296,
    "kind": "variable",
    "name": "Stream",
    "memberof": "src/utils/vfs.js",
    "static": true,
    "longname": "src/utils/vfs.js~Stream",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 297,
    "kind": "function",
    "name": "validateAll",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateAll",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 89,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "arr",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "compare",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 298,
    "kind": "function",
    "name": "validateNamedGroups",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateNamedGroups",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Validates array groups.",
    "lineNumber": 100,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "userGroups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 299,
    "kind": "function",
    "name": "validateMethodGroups",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateMethodGroups",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Validates map of groups based on method:[group,...]",
    "lineNumber": 117,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "userGroups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 300,
    "kind": "function",
    "name": "parseGet",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseGet",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Parses URL body.",
    "lineNumber": 234,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Object>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 301,
    "kind": "function",
    "name": "parseJson",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseJson",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Parses JSON body.",
    "lineNumber": 246,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object|Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object",
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 302,
    "kind": "function",
    "name": "parseFormData",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseFormData",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Parses form body.",
    "lineNumber": 265,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<any>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Number"
        ],
        "spread": false,
        "optional": false,
        "name": "config.maxFieldsSize",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Number"
        ],
        "spread": false,
        "optional": false,
        "name": "config.maxFileSize",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<any>"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 303,
    "kind": "function",
    "name": "mountpointResolver",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~mountpointResolver",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{mountpointResolver}",
    "description": "Resolves a mountpoint.",
    "lineNumber": 212,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 304,
    "kind": "function",
    "name": "createError",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~createError",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{createError}",
    "description": "Creates a new custom Error.",
    "lineNumber": 201,
    "params": [
      {
        "nullable": null,
        "types": [
          "Number"
        ],
        "spread": false,
        "optional": false,
        "name": "code",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "message",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Error"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 305,
    "kind": "function",
    "name": "checkMountpointPermission",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~checkMountpointPermission",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{checkMountpointPermission}",
    "description": "Checks permissions for given mountpoint.",
    "lineNumber": 162,
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "readOnly",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 306,
    "kind": "function",
    "name": "validateGroups",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateGroups",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{validateGroups}",
    "description": "Validates groups.",
    "lineNumber": 136,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "userGroups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "mountpoint",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 307,
    "kind": "function",
    "name": "streamFromRequest",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~streamFromRequest",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{streamFromRequest}",
    "description": "Gets the stream from an HTTP request.",
    "lineNumber": 76,
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 308,
    "kind": "function",
    "name": "sanitize",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~sanitize",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{sanitize}",
    "description": "Sanitizes a path.",
    "lineNumber": 58,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 309,
    "kind": "function",
    "name": "getPrefix",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~getPrefix",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{getPrefix}",
    "description": "Gets prefix of a VFS path.",
    "lineNumber": 51,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 310,
    "kind": "function",
    "name": "parseFields",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseFields",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{parseFields}",
    "description": "Middleware for handling HTTP requests.",
    "lineNumber": 284,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<any>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<any>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 311,
    "kind": "variable",
    "name": "errorCodes",
    "memberof": "src/utils/vfs.js",
    "static": true,
    "longname": "src/utils/vfs.js~errorCodes",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{errorCodes}",
    "description": "A map of error codes.",
    "lineNumber": 41,
    "type": {
      "types": [
        "{\"ENOENT\": number, \"EACCES\": number}"
      ]
    }
  },
  {
    "__docId__": 312,
    "kind": "variable",
    "name": "methodArguments",
    "memberof": "src/utils/vfs.js",
    "static": true,
    "longname": "src/utils/vfs.js~methodArguments",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/utils/vfs.js",
    "importStyle": "{methodArguments}",
    "description": "A map of methods and their arguments.\nUsed for direct access via API.",
    "lineNumber": 300,
    "type": {
      "types": [
        "{\"realpath\": *, \"exists\": *, \"stat\": *, \"readdir\": *, \"readfile\": *, \"writefile\": *, \"mkdir\": *, \"unlink\": *, \"touch\": *, \"search\": *, \"copy\": *, \"rename\": *, \"archive\": *}"
      ]
    }
  },
  {
    "__docId__": 313,
    "kind": "file",
    "name": "src/vfs.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\nconst express = require(\"express\");\nconst { Stream } = require(\"stream\");\nconst {\n\tmountpointResolver,\n\tcheckMountpointPermission,\n\tstreamFromRequest,\n\tsanitize,\n\tparseFields,\n\terrorCodes,\n} = require(\"./utils/vfs\");\n\nconst respondNumber = (result) => (typeof result === \"number\" ? result : -1);\nconst respondBoolean = (result) =>\n\ttypeof result === \"boolean\" ? result : Boolean(result);\nconst requestPath = (req) => [sanitize(req.fields.path)];\nconst requestSelection = (req) => [req.fields.selection];\nconst requestSearch = (req) => [sanitize(req.fields.root), req.fields.pattern];\nconst requestCross = (req) => [\n\tsanitize(req.fields.from),\n\tsanitize(req.fields.to),\n];\nconst requestFile = (req) => [\n\tsanitize(req.fields.path),\n\tstreamFromRequest(req),\n];\n\n/**\n * Parses the range request headers.\n * @param {String} range\n * @returns {Array}\n */\nconst parseRangeHeader = (range) => {\n\tconst [pstart, pend] = range.replace(/bytes=/, \"\").split(\"-\");\n\tconst start = parseInt(pstart, 10);\n\tconst end = pend ? parseInt(pend, 10) : undefined;\n\treturn [start, end];\n};\n\n/**\n * A \"finally\" for our chain.\n * @param {Request} req\n * @param {Response} res\n */\nconst onDone = (req, res) => {\n\tif (req.files) {\n\t\tfor (const fieldname in req.files) {\n\t\t\tfs.unlink(req.files[fieldname].filepath, () => ({}));\n\t\t}\n\t}\n};\n\n/**\n * Wraps a VFS adapter request.\n * @param {Function} fn The wrapper function to apply\n */\nconst wrapper = (fn) =>\n\t(req, res, next) =>\n\t\tfn(req, res)\n\t\t\t.then((result) => {\n\t\t\t\tif (result instanceof Stream) {\n\t\t\t\t\tresult.pipe(res);\n\t\t\t\t} else {\n\t\t\t\t\tres.json(result);\n\t\t\t\t}\n\n\t\t\t\tonDone(req, res);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tonDone(req, res);\n\t\t\t\tnext(error);\n\t\t\t});\n\n/**\n * Creates the middleware.\n * @param {Core} core MeeseOS Core instance reference\n * @returns {Function}\n */\nconst createMiddleware = (core) => {\n\tconst parse = parseFields(core.config(\"express\"));\n\n\treturn (req, res, next) =>\n\t\tparse(req, res)\n\t\t\t.then(({ fields, files }) => {\n\t\t\t\treq.fields = fields;\n\t\t\t\treq.files = files;\n\n\t\t\t\tnext();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tcore.logger.warn(error);\n\t\t\t\treq.fields = {};\n\t\t\t\treq.files = {};\n\n\t\t\t\tnext(error);\n\t\t\t});\n};\n\nconst createOptions = (req) => {\n\tconst options = req.fields.options;\n\tconst range = req.headers && req.headers.range;\n\tconst session = { ...(req.session || {}) };\n\tlet result = options || {};\n\n\tif (typeof options === \"string\") {\n\t\ttry {\n\t\t\tresult = JSON.parse(options) || {};\n\t\t} catch (e) {\n\t\t\t// Allow to fall through\n\t\t}\n\t}\n\n\tif (range) {\n\t\tresult.range = parseRangeHeader(req.headers.range);\n\t}\n\n\treturn {\n\t\t...result,\n\t\tsession,\n\t};\n};\n\n/**\n * Standard request with only a target.\n * @param {Function} findMountpoint\n * @returns {Function}\n */\nconst createRequestFactory = (findMountpoint) =>\n\t(getter, method, readOnly, respond) =>\n\t\tasync (req, res) => {\n\t\t\tconst options = createOptions(req);\n\t\t\tconst args = [...getter(req, res), options];\n\n\t\t\tconst found = await findMountpoint(args[0]);\n\t\t\tif (method === \"search\") {\n\t\t\t\tif (\n\t\t\t\t\tfound.mount.attributes &&\n\t\t\t\t\tfound.mount.attributes.searchable === false\n\t\t\t\t) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst { attributes } = found.mount;\n\t\t\tconst strict = attributes.strictGroups !== false;\n\t\t\tconst ranges = !attributes.adapter ||\n\t\t\t\tattributes.adapter === \"system\" ||\n\t\t\t\tattributes.ranges === true;\n\n\t\t\tconst vfsMethodWrapper = (method) =>\n\t\t\t\tfound.adapter[method]\n\t\t\t\t\t? found.adapter[method](found)(...args)\n\t\t\t\t\t: Promise.reject(new Error(`Adapter does not support ${method}`));\n\n\t\t\tconst readstat = () => vfsMethodWrapper(\"stat\").catch(() => ({}));\n\t\t\tawait checkMountpointPermission(req, res, method, readOnly, strict)(found);\n\n\t\t\tconst result = await vfsMethodWrapper(method);\n\t\t\tif (method === \"readfile\") {\n\t\t\t\tconst stat = await readstat();\n\n\t\t\t\tif (ranges && options.range) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (stat.size) {\n\t\t\t\t\t\t\tconst size = stat.size;\n\t\t\t\t\t\t\tconst [start, end] = options.range;\n\t\t\t\t\t\t\tconst realEnd = end || size - 1;\n\t\t\t\t\t\t\tconst chunksize = realEnd - start + 1;\n\n\t\t\t\t\t\t\tres.writeHead(206, {\n\t\t\t\t\t\t\t\t\"Content-Range\": `bytes ${start}-${realEnd}/${size}`,\n\t\t\t\t\t\t\t\t\"Accept-Ranges\": \"bytes\",\n\t\t\t\t\t\t\t\t\"Content-Length\": chunksize,\n\t\t\t\t\t\t\t\t\"Content-Type\": stat.mime,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn(\"Failed to send a ranged response\", e);\n\t\t\t\t\t}\n\t\t\t\t} else if (stat.mime) {\n\t\t\t\t\tres.append(\"Content-Type\", stat.mime);\n\t\t\t\t}\n\n\t\t\t\tif (options.download) {\n\t\t\t\t\tconst filename = encodeURIComponent(path.basename(args[0]));\n\t\t\t\t\tres.append(\n\t\t\t\t\t\t\"Content-Disposition\",\n\t\t\t\t\t\t`attachment; filename*=utf-8''${filename}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn respond ? respond(result) : result;\n\t\t};\n\n/**\n * Request that has a source and target.\n * @param {Function} findMountpoint\n * @returns {Boolean}\n */\nconst createCrossRequestFactory = (findMountpoint) =>\n\t(getter, method, respond) =>\n\t\tasync (req, res) => {\n\t\t\tconst [from, to, options] = [...getter(req, res), createOptions(req)];\n\n\t\t\tconst srcMount = await findMountpoint(from);\n\t\t\tconst destMount = await findMountpoint(to);\n\t\t\tconst sameAdapter = srcMount.adapter === destMount.adapter;\n\n\t\t\tconst srcStrict = srcMount.mount.attributes.strictGroups !== false;\n\t\t\tconst destStrict = destMount.mount.attributes.strictGroups !== false;\n\n\t\t\tawait checkMountpointPermission(\n\t\t\t\treq,\n\t\t\t\tres,\n\t\t\t\t\"readfile\",\n\t\t\t\tfalse,\n\t\t\t\tsrcStrict\n\t\t\t)(srcMount);\n\n\t\t\tawait checkMountpointPermission(\n\t\t\t\treq,\n\t\t\t\tres,\n\t\t\t\t\"writefile\",\n\t\t\t\ttrue,\n\t\t\t\tdestStrict\n\t\t\t)(destMount);\n\n\t\t\tif (sameAdapter) {\n\t\t\t\tconst result = await srcMount.adapter[method](srcMount, destMount)(\n\t\t\t\t\tfrom,\n\t\t\t\t\tto,\n\t\t\t\t\toptions\n\t\t\t\t);\n\n\t\t\t\treturn Boolean(result);\n\t\t\t}\n\n\t\t\t// Simulates a copy/move\n\t\t\tconst stream = await srcMount.adapter.readfile(srcMount)(from, options);\n\n\t\t\tconst result = await destMount.adapter.writefile(destMount)(\n\t\t\t\tto,\n\t\t\t\tstream,\n\t\t\t\toptions\n\t\t\t);\n\n\t\t\tif (method === \"rename\") {\n\t\t\t\tawait srcMount.adapter.unlink(srcMount)(from, options);\n\t\t\t}\n\n\t\t\treturn Boolean(result);\n\t\t};\n\n/**\n * VFS Methods\n * @param {Core} core MeeseOS Core instance reference\n * @returns {Object}\n */\nconst vfs = (core) => {\n\tconst findMountpoint = mountpointResolver(core);\n\tconst createRequest = createRequestFactory(findMountpoint);\n\tconst createCrossRequest = createCrossRequestFactory(findMountpoint);\n\n\t// Wire up all available VFS events\n\treturn {\n\t\tcapabilities: createRequest(requestPath, \"capabilities\", false),\n\t\trealpath: createRequest(requestPath, \"realpath\", false),\n\t\texists: createRequest(requestPath, \"exists\", false, respondBoolean),\n\t\tstat: createRequest(requestPath, \"stat\", false),\n\t\treaddir: createRequest(requestPath, \"readdir\", false),\n\t\treadfile: createRequest(requestPath, \"readfile\", false),\n\t\twritefile: createRequest(requestFile, \"writefile\", true, respondNumber),\n\t\tmkdir: createRequest(requestPath, \"mkdir\", true, respondBoolean),\n\t\tunlink: createRequest(requestPath, \"unlink\", true, respondBoolean),\n\t\ttouch: createRequest(requestPath, \"touch\", true, respondBoolean),\n\t\tsearch: createRequest(requestSearch, \"search\", false),\n\t\tcopy: createCrossRequest(requestCross, \"copy\"),\n\t\trename: createCrossRequest(requestCross, \"rename\"),\n\t\tarchive: createRequest(requestSelection, \"archive\", false),\n\t};\n};\n\n/**\n * Creates a new VFS Express router.\n * @param {Core} core MeeseOS Core instance reference\n * @returns {Object}\n */\nmodule.exports = (core) => {\n\tconst router = express.Router();\n\tconst methods = vfs(core);\n\tconst middleware = createMiddleware(core);\n\tconst { useWebTokens, isAuthenticated } = core.make(\"meeseOS/express\");\n\tconst vfsGroups = core.config(\"auth.vfsGroups\", []);\n\tconst logEnabled = core.config(\"development\");\n\n\t// Middleware first\n\trouter.use(useWebTokens(core));\n\trouter.use(isAuthenticated(vfsGroups));\n\trouter.use(middleware);\n\n\t// Then all VFS routes (needs implementation above)\n\trouter.get(\"/capabilities\", wrapper(methods.capabilities));\n\trouter.get(\"/exists\", wrapper(methods.exists));\n\trouter.get(\"/stat\", wrapper(methods.stat));\n\trouter.get(\"/readdir\", wrapper(methods.readdir));\n\trouter.get(\"/readfile\", wrapper(methods.readfile));\n\trouter.post(\"/writefile\", wrapper(methods.writefile));\n\trouter.post(\"/rename\", wrapper(methods.rename));\n\trouter.post(\"/copy\", wrapper(methods.copy));\n\trouter.post(\"/mkdir\", wrapper(methods.mkdir));\n\trouter.post(\"/unlink\", wrapper(methods.unlink));\n\trouter.post(\"/touch\", wrapper(methods.touch));\n\trouter.post(\"/search\", wrapper(methods.search));\n\trouter.post(\"/archive\", wrapper(methods.archive));\n\n\t// Finally catch promise exceptions\n\trouter.use((error, req, res, next) => {\n\t\tconst code = typeof error.code === \"number\"\n\t\t\t? error.code\n\t\t\t: errorCodes[error.code] || 400;\n\n\t\tif (logEnabled) {\n\t\t\tcore.logger.error(error);\n\t\t}\n\n\t\tres.status(code).json({\n\t\t\terror: error.toString(),\n\t\t\tstack: logEnabled ? error.stack : undefined,\n\t\t});\n\t});\n\n\treturn { router, methods };\n};\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/vfs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 314,
    "kind": "variable",
    "name": "Stream",
    "memberof": "src/vfs.js",
    "static": true,
    "longname": "src/vfs.js~Stream",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 315,
    "kind": "variable",
    "name": "mountpointResolver",
    "memberof": "src/vfs.js",
    "static": true,
    "longname": "src/vfs.js~mountpointResolver",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 316,
    "kind": "function",
    "name": "respondNumber",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~respondNumber",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "params": [
      {
        "name": "result",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 317,
    "kind": "function",
    "name": "respondBoolean",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~respondBoolean",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "params": [
      {
        "name": "result",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 318,
    "kind": "function",
    "name": "requestPath",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~requestPath",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "params": [
      {
        "name": "req",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 319,
    "kind": "function",
    "name": "requestSelection",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~requestSelection",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [
      {
        "name": "req",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 320,
    "kind": "function",
    "name": "requestSearch",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~requestSearch",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 51,
    "undocument": true,
    "params": [
      {
        "name": "req",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 321,
    "kind": "function",
    "name": "requestCross",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~requestCross",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 52,
    "undocument": true,
    "params": [
      {
        "name": "req",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 322,
    "kind": "function",
    "name": "requestFile",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~requestFile",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 56,
    "undocument": true,
    "params": [
      {
        "name": "req",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 323,
    "kind": "function",
    "name": "parseRangeHeader",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~parseRangeHeader",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": "Parses the range request headers.",
    "lineNumber": 66,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "range",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 324,
    "kind": "function",
    "name": "onDone",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~onDone",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": "A \"finally\" for our chain.",
    "lineNumber": 78,
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": ""
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 325,
    "kind": "function",
    "name": "wrapper",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~wrapper",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": "Wraps a VFS adapter request.",
    "lineNumber": 90,
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "fn",
        "description": "The wrapper function to apply"
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 326,
    "kind": "function",
    "name": "createMiddleware",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~createMiddleware",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": "Creates the middleware.",
    "lineNumber": 112,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Function}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 327,
    "kind": "function",
    "name": "createOptions",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~createOptions",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 132,
    "undocument": true,
    "params": [
      {
        "name": "req",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "{...result: Object, \"session\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 328,
    "kind": "function",
    "name": "createRequestFactory",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~createRequestFactory",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": "Standard request with only a target.",
    "lineNumber": 161,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Function}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "findMountpoint",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Function"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 329,
    "kind": "function",
    "name": "createCrossRequestFactory",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~createCrossRequestFactory",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": "Request that has a source and target.",
    "lineNumber": 234,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "findMountpoint",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 330,
    "kind": "function",
    "name": "vfs",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~vfs",
    "access": "public",
    "export": false,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": null,
    "description": "VFS Methods",
    "lineNumber": 293,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 331,
    "kind": "function",
    "name": "vfs",
    "memberof": "src/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/vfs.js~vfs",
    "access": "public",
    "export": true,
    "importPath": "@meeseOS/server/src/vfs.js",
    "importStyle": "vfs",
    "description": "Creates a new VFS Express router.",
    "lineNumber": 322,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "kind": "index",
    "content": "# MeeseOS Server\n\n[![Maintainability](https://api.codeclimate.com/v1/badges/b2e4c52db03e57b4ad76/maintainability)](https://codeclimate.com/github/os-js/osjs-server/maintainability)\n[![Test Coverage](https://api.codeclimate.com/v1/badges/b2e4c52db03e57b4ad76/test_coverage)](https://codeclimate.com/github/os-js/osjs-server/test_coverage)\n\nThis is the main node server module for MeeseOS.\n\nContains all services and interfaces required to run a node server for MeeseOS.\n\n## VFS Chain\n\n<!-- https://mermaid-js.github.io/mermaid/#/flowchart -->\n```mermaid\nflowchart TD\n\tsubgraph Client\n\t\tdirection LR\n\t\tA1[\"Application\"] --> B1[\"VFS function call\"] --> C1[\"VFS Client Adapter\"] --> D1[\"HTTP Request\"]\n\tend\n\tsubgraph Server\n\t\tdirection LR\n\t\tA2[\"HTTP endpoint matching VFS function name\"] --> B2[\"VFS Server Adapter\"] --> C2[\"Actual Filesystem\"]\n\tend\n\n\tClient --> Server\n```\n\nThe client always represents stuff with virtual paths, wihch the VFS server adapter is able to resolve to access a physical filesystem.\n\nThe APIs are not limited to the MeeseOS server. A VFS client adapter can theoretically connect to anything as long as the file objects have the correct shape.\n",
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"@meeseOS/server\",\n  \"version\": \"1.3.0\",\n  \"description\": \"meeseOS Server\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"build\": \"echo \\\"There is no build command for server\\\" && exit 0\",\n    \"test\": \"npm run eslint && npm run jest\",\n    \"jest\": \"jest\",\n    \"coverage\": \"jest --coverage\",\n    \"eslint\": \"eslint index.js src\",\n    \"prepublishOnly\": \"npm run test\"\n  },\n  \"files\": [\n    \"src/\",\n    \"index.js\",\n    \"README.md\"\n  ],\n  \"engines\": {\n    \"node\": \">=12.0.0\"\n  },\n  \"devDependencies\": {\n    \"@meeseOS/eslint-config\": \"workspace:*\",\n    \"eslint\": \"^8.25.0\",\n    \"eslint-plugin-jest\": \"^26.5.3\",\n    \"jest-express\": \"^1.12.0\",\n    \"temp\": \"^0.9.4\",\n    \"jest\": \"^26.0.0\"\n  },\n  \"dependencies\": {\n    \"@meeseOS/common\": \"workspace:*\",\n    \"body-parser\": \"^1.19.1\",\n    \"chokidar\": \"^3.5.3\",\n    \"connect-loki\": \"^1.2.0\",\n    \"consola\": \"^2.15.3\",\n    \"deepmerge\": \"^4.2.2\",\n    \"express\": \"^4.17.2\",\n    \"express-http-proxy\": \"^1.6.3\",\n    \"express-session\": \"^1.17.3\",\n    \"express-ws\": \"^5.0.2\",\n    \"fast-glob\": \"^2.2.7\",\n    \"filehound\": \"^1.17.5\",\n    \"formidable\": \"^2.0.1\",\n    \"fs-extra\": \"^10.0.0\",\n    \"mime\": \"^3.0.0\",\n    \"minimist\": \"^1.2.5\",\n    \"morgan\": \"^1.10.0\",\n    \"nocache\": \"^3.0.1\",\n    \"sanitize-filename\": \"^1.6.3\",\n    \"uuid\": \"^8.3.2\",\n    \"yazl\": \"^2.5.1\",\n    \"extract-zip\": \"^2.0.1\",\n    \"jsonwebtoken\": \"^8.5.1\",\n    \"lokijs\": \"^1.5.12\"\n  },\n  \"eslintConfig\": {\n    \"env\": {\n      \"browser\": true,\n      \"node\": true,\n      \"jest/globals\": true\n    },\n    \"plugins\": [\"jest\"],\n    \"parserOptions\": {\n      \"sourceType\": \"module\"\n    },\n    \"extends\": [\"@meeseOS/eslint-config\", \"plugin:jest/recommended\"]\n  },\n  \"esdoc\": {\n    \"source\": \"./src\",\n    \"destination\": \"./doc\",\n    \"plugins\": [\n      {\n        \"name\": \"esdoc-standard-plugin\",\n        \"option\": {\n          \"brand\": {\n            \"title\": \"meeseOS Server API\",\n            \"description\": \"meeseOS Server API Documentation\"\n          },\n          \"lint\": {\n            \"enable\": false\n          },\n          \"coverage\": {\n            \"enable\": false\n          },\n          \"undocumentIdentifier\": {\n            \"enable\": false\n          }\n        }\n      },\n      {\n        \"name\": \"esdoc-publish-html-plugin\"\n      },\n      {\n        \"name\": \"esdoc-ecmascript-proposal-plugin\",\n        \"option\": {\n          \"all\": true\n        }\n      },\n      {\n        \"name\": \"esdoc-node\"\n      }\n    ]\n  },\n  \"jest\": {\n    \"collectCoverage\": true,\n    \"coverageReporters\": [\n      \"lcov\"\n    ],\n    \"moduleNameMapper\": {\n      \"^meeseOS$\": \"<rootDir>/__mocks__/core.js\"\n    },\n    \"coveragePathIgnorePatterns\": [\n      \"src/esdoc.js\",\n      \"src/config.js\",\n      \"src/providers\",\n      \"/node_modules/\"\n    ]\n  }\n}\n",
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  }
]